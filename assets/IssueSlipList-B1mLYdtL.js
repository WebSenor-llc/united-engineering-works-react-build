import{u as A,r as n,a as I,j as s,A as d,h as p,e as u,y as m}from"./index-CbNhh14T.js";import{L as P}from"./ListWrapper-CtE9blfZ.js";import{T as S,a as E,b as a}from"./TableWrapper-tM3Cun3B.js";import{T as _}from"./TableRow-XjmxnSZP.js";import{u as D}from"./usePagination-DcXLmXSb.js";import{T as L,a as g}from"./TableDelete-BtQ4bCNH.js";import{T as C}from"./TableEdit-Bugrl_H8.js";const H=()=>{const{renderPagination:h}=D(),i=A(),[x,f]=n.useState([]),{user:o,selectedBranchId:c}=I(),j=e=>{if(!e)return{ymd:"",dmy:""};const[t]=e.split("T"),[r,T,b]=t.split("-");return{ymd:t,dmy:`${b}-${T}-${r}`}},l=async()=>{try{const e=c||o?.branch_id,t=await p.get(u.issue_slips.items,{params:e?{branch_id:e}:{}}),r=t.data?.data?.slips||t.data?.slips||[];f(r)}catch(e){console.error("Failed to fetch issue slips",e)}};n.useEffect(()=>{l()},[c,o]);const y=async e=>{try{await p.delete(u.issue_slips.delete(e)),m.success("Issue slip deleted successfully"),l()}catch(t){console.error("Failed to delete issue slip",t),m.error("Failed to delete issue slip")}};return s.jsxs(P,{title:"Issue Slip List",createOnClick:()=>i(d.ISSUE_SLIP.CREATE),children:[s.jsxs(S,{children:[s.jsx(E,{cols:[{title:"Date"},{title:"Issued to MR"},{title:"For Machine"},{title:"For Party"},{title:"Purpose"},{title:"Actions"}]}),s.jsx("tbody",{children:x.map((e,t)=>s.jsxs(_,{children:[s.jsx(a,{children:t+1}),s.jsx(a,{children:j(e.created_at).dmy}),s.jsx(a,{children:e?.mr||"N/A"}),s.jsx(a,{children:e.for_machine||"N/A"}),s.jsx(a,{children:e.for_party||"N/A"}),s.jsx(a,{children:e.purpose||"N/A"}),s.jsxs(L,{children:[s.jsx(C,{onClick:()=>i(`${d.ISSUE_SLIP.CREATE}?editId=${e.id}`)}),s.jsx(g,{onClick:()=>y(e.id)})]})]},e.id))})]}),h()]})};export{H as default};
