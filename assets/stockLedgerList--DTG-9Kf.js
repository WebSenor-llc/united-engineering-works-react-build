import{r,a as S,j as t,h as _,e as N}from"./index-CzjESdn-.js";import{L as v}from"./ListWrapper-zh-B1St2.js";import{T as L,a as q,b as a}from"./TableWrapper-CCT9enoe.js";import{T as A}from"./TableRow-BJYJAldJ.js";import{u as D}from"./usePagination-DPp0a-ct.js";import{T as P}from"./TextInput-DfufbPvl.js";const B=()=>{const{page:d,rowsPerPage:l,setTotal:m,renderPagination:h}=D(),[u,p]=r.useState([]),{user:x,selectedBranchId:n}=S(),[c,y]=r.useState(""),[o,j]=r.useState(""),f=e=>{if(!e)return{ymd:"",dmy:""};const[s]=e.split("T"),[i,b,T]=s.split("-");return{ymd:s,dmy:`${T}-${b}-${i}`}};r.useEffect(()=>{const e=setTimeout(()=>{j(c)},300);return()=>clearTimeout(e)},[c]);const g=async()=>{try{const e=await _.get(N.stock_ledger.items,{params:{page:d+1,rowsPerPage:l,...n&&{branch_id:n},...o&&{search:o}}}),s=e.data?.items??[],i=e.data?.pagination;p(s),i?.total!==void 0&&m(i.total)}catch(e){console.error("Failed to fetch stock ledger",e)}};return r.useEffect(()=>{g()},[d,l,n,x,o]),t.jsxs(v,{title:"Stock Ledger List",children:[t.jsx("div",{className:"mb-4 mt-4",children:t.jsx(P,{placeholder:"Search by item name...",value:c,onChange:e=>y(e.target.value),className:"max-w-md"})}),t.jsxs(L,{children:[t.jsx(q,{cols:[{title:"Date"},{title:"Item Name"},{title:"Received Qty"},{title:"Issued Qty"},{title:"Deposited Qty"},{title:"Balance Qty"},{title:"Rejected Qty"}]}),t.jsx("tbody",{children:u.map((e,s)=>t.jsxs(A,{children:[t.jsx(a,{className:"px-5",children:s+1}),t.jsx(a,{children:f(e.created_at).dmy}),t.jsx(a,{children:e?.item_name||"N/A"}),t.jsx(a,{children:e?.received_quantity||"N/A"}),t.jsx(a,{children:e?.issued_quantity||"N/A"}),t.jsx(a,{children:e?.deposited_quantity||"N/A"}),t.jsx(a,{children:e?.balance_quantity||"0"}),t.jsx(a,{children:e?.rejected_quantity||"0"})]},e.id))})]}),h()]})};export{B as default};
