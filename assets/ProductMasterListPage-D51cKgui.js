import{a as g,r as o,u as _,j as e,P as m,A as p,e as u,h as A}from"./index-DhMZcEWH.js";import{L as b}from"./ListWrapper-CgjZDznb.js";import{T as E}from"./TableActions-CbKw7GQR.js";import{T as R,a as y,b as s}from"./TableWrapper-oo68n9a4.js";import{T as C}from"./TableDelete-CFuZEci9.js";import{T as L}from"./TableEdit-BkrWr8oq.js";import{T as S}from"./TableRow-BK-4lt1d.js";import{u as v}from"./usePagination-C5ACwfPp.js";import{L as D}from"./Loading-DarExsNw.js";const W=()=>{const{page:i,rowsPerPage:l,setTotal:T,renderPagination:h}=v(),{selectedBranchId:r}=g(),[x,f]=o.useState([]),[j,n]=o.useState(!1),c=_(),d=async()=>{n(!0);try{const t=await A.get(u.product_master.products,{params:{page:i+1,rowsPerPage:l,...r&&{branch_id:r}}});console.log("object",t.data);const{products:a,pagination:P}=t.data;f(a),T(P.total)}catch(t){console.log(t)}finally{n(!1)}};return o.useEffect(()=>{d()},[i,l,r]),e.jsxs(b,{title:"Product Master",createOnClick:m.hasPermission("master_data_create_products")?()=>c(p.PRODUCT_MASTER.CREATE):void 0,children:[j?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(D,{})}):e.jsxs(R,{children:[e.jsx(y,{cols:[{title:"Product Name"},{title:"Source"},{title:"Quantity Required"},{title:"Alloted To"},{title:"Actions"}]}),e.jsx("tbody",{children:x.map((t,a)=>e.jsxs(S,{children:[e.jsx(s,{className:"px-5",children:a+1}),e.jsx(s,{children:t.name}),e.jsx(s,{children:t.source}),e.jsx(s,{children:t.quantity_required}),e.jsx(s,{children:t?.allocated_supervisor?.full_name||"-"}),m.hasPermission("master_data_update_products")&&e.jsxs(E,{children:[e.jsx(L,{onClick:()=>c(`${p.PRODUCT_MASTER.CREATE}?editId=${t.id}`)}),e.jsx(C,{refetch:d,endpoint:u.product_master.delete(t?.id)})]})]},a))})]}),h()]})};export{W as default};
