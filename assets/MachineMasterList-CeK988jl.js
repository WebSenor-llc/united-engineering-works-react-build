import{u as S,r as i,j as e,H as _,A as x,e as u,P as y,h as A}from"./index-XrqdkMlQ.js";import{L as E}from"./ListWrapper-n8s5LAbo.js";import{T as P}from"./TableActions-BqxsRnCX.js";import{T as s}from"./TableData-D2335yaW.js";import{T as v}from"./TableDelete-RE0NQPTb.js";import{T as w}from"./TableEdit-sJQZlFPJ.js";import{T as C,a as H}from"./TableWrapper-BfKmYKz6.js";import{T as L}from"./TableRow-DbFK36gc.js";import{u as R}from"./usePagination-1AUtPZm0.js";import{L as D}from"./Loading-De0ina5-.js";import{g as $,f as k}from"./maintenanceUtils-DBVPLXJ6.js";const Q=()=>{const l=S(),{page:c,rowsPerPage:o,setTotal:f,renderPagination:g}=R(),[m,j]=i.useState([]),[T,d]=i.useState(!1),[r,b]=i.useState(""),h=async a=>{d(!0);try{const t={page:c+1,per_page:o};a&&(t.machine_name=a);const n=await A.get(u.machine_master.machines,{params:t}),N=n?.data.machines,{pagination:p}=n.data;p?.last_page!==void 0&&f(p.last_page),j(N)}catch(t){console.log(t)}finally{d(!1)}};i.useEffect(()=>{h(r)},[c,o,r]);const M=a=>{b(a)};return e.jsxs(E,{title:"Machine Master",createOnClick:y.hasPermission("master_data_create_machine")?()=>l(x.MACHINE_MASTER.CREATE):void 0,children:[e.jsx("div",{className:"mb-4",children:e.jsx(_,{placeholder:"Search by machine name...",onSearch:M,className:"w-full sm:w-96"})}),T?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(D,{})}):e.jsxs(C,{children:[e.jsx(H,{cols:[{title:"Machine Name"},{title:"Machine Number"},{title:"Status"},{title:"Next Maintenance"},{title:"Maintenance Status"},{title:"Actions"}]}),e.jsx("tbody",{children:m.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8 text-gray-500",children:r?"No machines found matching your search":"No machines available"})}):m.map((a,t)=>{const n=$(a.maintenance_date);return e.jsxs(L,{children:[" ",e.jsx(s,{className:"px-5",children:c*o+t+1}),e.jsx(s,{children:a.name}),e.jsx(s,{children:a.number}),e.jsx(s,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.status==="operational"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.status==="operational"?"Operational":"Breakdown"})}),e.jsx(s,{children:k(a.maintenance_date)}),e.jsx(s,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.badge}`,children:n.text})}),e.jsx(s,{children:e.jsxs(P,{children:[e.jsx(w,{onClick:()=>l(`${x.MACHINE_MASTER.CREATE}?id=${a?.id}`)}),e.jsx(v,{refetch:()=>h(r),endpoint:u.machine_master.delete(a?.id)})]})})]},t)})})]}),g()]})};export{Q as default};
