import{r as o,u as S,j as e,H as A,P as p,A as u,e as h,h as E}from"./index-C-HhpDkY.js";import{L as N}from"./ListWrapper-DOgiLfWA.js";import{T as R}from"./TableActions-DN0qvBjN.js";import{T as v,a as C,b as a}from"./TableWrapper-ClISlYEF.js";import{T as L}from"./TableDelete-BioVSJwJ.js";import{T as w}from"./TableEdit-dm3GUF_S.js";import{T as D}from"./TableRow-CfaCzneu.js";import{u as H}from"./usePagination-84yGnTMg.js";import{L as M}from"./Loading-C6uwP82P.js";const B=()=>{const{page:i,rowsPerPage:c,setTotal:x,renderPagination:j}=H(),[l,T]=o.useState([]),[f,n]=o.useState(!1),[r,P]=o.useState(""),d=S(),m=async s=>{n(!0);try{const t={page:i+1,rowsPerPage:c};s&&(t.product_name=s);const _=await E.get(h.product_master.products,{params:t}),{products:b,pagination:y}=_.data;T(b),x(y.total)}catch(t){console.log(t)}finally{n(!1)}};o.useEffect(()=>{m(r)},[i,c,r]);const g=s=>{P(s)};return e.jsxs(N,{title:"Product Master",createOnClick:p.hasPermission("master_data_create_products")?()=>d(u.PRODUCT_MASTER.CREATE):void 0,children:[e.jsx("div",{className:"mb-4",children:e.jsx(A,{placeholder:"Search by product name...",onSearch:g,className:"w-full sm:w-96"})}),f?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(M,{})}):e.jsxs(v,{children:[e.jsx(C,{cols:[{title:"Product Name"},{title:"Source"},{title:"Quantity Required"},{title:"Alloted To"},{title:"Actions"}]}),e.jsx("tbody",{children:l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:r?"No products found matching your search":"No products available"})}):l.map((s,t)=>e.jsxs(D,{children:[e.jsx(a,{className:"px-5",children:i*c+t+1}),e.jsx(a,{children:s.name}),e.jsx(a,{children:s.source}),e.jsx(a,{children:s.quantity_required}),e.jsx(a,{children:s?.allocated_supervisor?.full_name||"-"}),p.hasPermission("master_data_update_products")&&e.jsx(a,{children:e.jsxs(R,{children:[e.jsx(w,{onClick:()=>d(`${u.PRODUCT_MASTER.CREATE}?editId=${s.id}`)}),e.jsx(L,{refetch:()=>m(r),endpoint:h.product_master.delete(s?.id)})]})})]},t))})]}),j()]})};export{B as default};
