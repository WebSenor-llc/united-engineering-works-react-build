import{u as A,r as n,a as E,j as e,A as f,h as x,e as T,y as i}from"./index-DhMZcEWH.js";import{L as P}from"./ListWrapper-CgjZDznb.js";import{T as R,a as L,b as r}from"./TableWrapper-oo68n9a4.js";import{T as G}from"./TableRow-BK-4lt1d.js";import{u as v}from"./usePagination-C5ACwfPp.js";import{T as C}from"./TableActions-CbKw7GQR.js";import{T as D}from"./TableEdit-BkrWr8oq.js";import{T as S}from"./TableDelete-CFuZEci9.js";import{L as $}from"./Loading-DarExsNw.js";const V=()=>{const{page:l,rowsPerPage:c,setTotal:j,renderPagination:b}=v(),d=A(),[p,m]=n.useState([]),[g,u]=n.useState(!1),{selectedBranchId:h}=E(),y=t=>{if(!t)return"";const[a]=t.split("T"),[s,o,N]=a.split("-");return`${N}-${o}-${s}`};n.useEffect(()=>{(async()=>{u(!0);try{const a=await x.get(T.non_returnable_gate_pass.items,{params:{page:l+1,rowsPerPage:c,branch_id:h}}),s=a.data?.gate_passes||a.data?.data||a.data||[],o=a.data?.pagination;m(s),o?.total!==void 0&&j(o.total)}catch(a){console.error("Failed to fetch non-returnable gate passes",a),i.error("Failed to load gate passes")}finally{u(!1)}})()},[l,c,h]);const _=async t=>{try{await x.delete(T.non_returnable_gate_pass.delete(t)),m(a=>a.filter(s=>s.id!==t)),i.success("Gate pass deleted successfully")}catch(a){console.error("Failed to delete gate pass",a),i.error("Failed to delete gate pass")}};return e.jsxs(P,{title:"Non Returnable Gate Pass List",createOnClick:()=>d(f.NON_RETURNABLE_GATEPAS.CREATE),children:[g?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx($,{})}):e.jsxs(R,{children:[e.jsx(L,{cols:[{title:"Date"},{title:"Party Name"},{title:"Purpose"},{title:"Vehicle Number"},{title:"Actions"}]}),e.jsx("tbody",{children:p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"No gate passes found"})}):p.map((t,a)=>e.jsxs(G,{children:[e.jsx(r,{className:"px-5",children:a+1}),e.jsx(r,{children:y(t.created_at||t.date)}),e.jsx(r,{children:t.party_name||"-"}),e.jsx(r,{children:t.purpose||"-"}),e.jsx(r,{children:t.vehicle_number||"-"}),e.jsxs(C,{children:[e.jsx(D,{onClick:()=>d(`${f.NON_RETURNABLE_GATEPAS.CREATE}?editId=${t.id}`)}),e.jsx(S,{onClick:()=>_(t.id)})]})]},t.id))})]}),b()]})};export{V as default};
