import{g as j,r as c,j as e,D as p,h as u,e as g}from"./index-DZtYjDQU.js";import{B as f}from"./BackButton-CPf7tMbv.js";import{L as b}from"./Loading-DOZuRJzQ.js";import{N}from"./NoDataFound-BF6h_fxf.js";import{T as y,a as _}from"./TableWrapper-CtuUeaqn.js";import{T as D}from"./TableRow-BD2yREqM.js";import{T as i}from"./TableData-BjMpP-xJ.js";const r=(t,l)=>t&&(typeof t=="string"||typeof t=="number")?t:"--",o=t=>t?typeof t=="string"?t:typeof t=="object"&&t.branch_name?t.branch_name:"":"",R=t=>t?typeof t=="string"?t:typeof t=="object"&&t.name?t.name:"":"",k=()=>{const{id:t}=j(),[l,d]=c.useState(!1),[s,x]=c.useState(null),m=async()=>{d(!0);try{const n=await u.get(g.material_requisition.details(Number(t))),a=n.data?.data?.material_requisition||n.data?.material_requisition||n.data,h={...a,department:o(a?.department),machine_use:R(a?.machine_use),site_use:o(a?.site_use)};x(h)}catch(n){console.log("Failed to load MR details",n)}finally{d(!1)}};return c.useEffect(()=>{t&&m()},[t]),l?e.jsx(b,{}):s?e.jsxs("div",{className:"max-w-6xl mx-auto min-h-screen p-4 bg-gray-50 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{}),e.jsx("h2",{className:"text-xl font-semibold",children:"Material Request Details"})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Basic Details"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"MR Number:"})," ",r(s.mr_number)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Department:"})," ",r(s.department)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"}),e.jsx("span",{className:"inline-flex ml-2 px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:r(s.status)})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Priority:"})," ",r(s.priority)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Required Date:"})," ",s.required_by_date?p.dateWithTime(s.required_by_date):"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Inspection:"})," ",s.inspection?"Yes":"No"]}),e.jsxs("p",{className:"col-span-full",children:[e.jsx("strong",{children:"Purpose / Remarks:"})," ",r(s.remarks)]})]}),(s.status?.includes("Cancelled")||s.status?.includes("Rejected"))&&e.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-800",children:[e.jsxs("strong",{children:[s.status?.includes("Cancelled")?"Cancellation":"Rejection"," ","Reason:"]})," ",r(s.cancellation_reason||s.rejection_reason)]})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Usage Details"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Project Use:"})," ",r(s.project_use)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Project Note:"})," ",r(s.project_note)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Machine Use:"})," ",r(s.machine_use)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Machine Note:"})," ",r(s.machine_note)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Site Use:"})," ",r(s.site_use)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Site Note:"})," ",r(s.site_note)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"General Use:"})," ",r(s.general_use)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"General Note:"})," ",r(s.general_note)]})]})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Items Requested"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(y,{children:[e.jsx(_,{cols:[{title:"Item Name"},{title:"Item Code"},{title:"Item Description"},{title:"Unit"},{title:"Requested Qty"},{title:"Stock In Store"},{title:"Remarks"}]}),e.jsx("tbody",{children:s.items?.length>0?s.items.map((n,a)=>e.jsxs(D,{children:[e.jsx(i,{className:"text-center",children:a+1}),e.jsx(i,{children:r(n.item?.item_name)}),e.jsx(i,{children:r(n.item?.item_code)}),e.jsx(i,{className:"text-sm",children:r(n.item?.item_description)}),e.jsx(i,{children:r(n.item?.unit?.unit_name)}),e.jsx(i,{className:"text-center",children:n.quantity_required??0}),e.jsx(i,{className:"text-center",children:n.item?.balance_quantity??"--"}),e.jsx(i,{children:r(n.remarks)})]},n.item_id||a)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-4",children:"No Items Found"})})})]})})]})]}):e.jsx(N,{})};export{k as default};
