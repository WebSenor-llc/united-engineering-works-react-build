import{u,r as n,j as e,P as r,A as m,e as x,h as N}from"./index-BPpkRjQL.js";import{L as T}from"./ListWrapper-CPLeNLbE.js";import{T as w}from"./TableActions-D3MpUblt.js";import{T as P,a as _,b as s}from"./TableWrapper-DY-gYtcA.js";import{T as A}from"./TableDelete-BMVkYyb4.js";import{T as E}from"./TableEdit-knxLDW_G.js";import{T as y}from"./TableRow-1FqLnTPj.js";import{L as B}from"./Loading-nJeSTSjR.js";import{u as C}from"./usePagination-D4HBs6TU.js";const W=()=>{const i=u(),[p,f]=n.useState([]),[b,o]=n.useState(!1),{page:c,rowsPerPage:l,setTotal:g,renderPagination:j}=C(),d=async()=>{o(!0);try{const a=await N.get(x.branches.branch,{params:{page:c+1,rowsPerPage:l}}),{branches:t,pagination:h}=a.data;f(t||a.data.branches),h?.total!==void 0&&g(h.total)}catch(a){console.log(a)}finally{o(!1)}};return n.useEffect(()=>{d()},[c,l]),e.jsxs(T,{title:"Branches",createOnClick:r.hasPermission("branch_management_create")?()=>i(m.BRANCHES.CREATE):void 0,children:[b?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(B,{})}):e.jsxs(P,{children:[e.jsx(_,{cols:[{title:"Branch Name"},{title:"Branch Code"},{title:"Branch Number"},{title:"Email"},{title:"Is Head Office"},{title:"Address"},{title:"Actions"}]}),e.jsx("tbody",{children:p.map((a,t)=>e.jsxs(y,{children:[e.jsx(s,{className:"w-12 text-center font-medium",children:t+1}),e.jsx(s,{className:"w-48",children:a.branch_name}),e.jsx(s,{className:"w-32",children:a.branch_code}),e.jsx(s,{className:"w-36",children:a.phone}),e.jsx(s,{className:"w-64",children:a.email}),e.jsx(s,{className:"w-32",children:e.jsx("span",{className:`status-badge inline-flex items-center justify-center px-2 py-1 text-xs font-medium rounded-full ${a.is_head_office?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,style:{borderRadius:"9999px",filter:"none",boxShadow:"none",border:"none",outline:"none",textShadow:"none"},children:a.is_head_office?"Yes":"No"})}),e.jsx(s,{className:"w-80",children:a.address}),e.jsx(s,{className:"w-20",children:e.jsxs(w,{children:[r.hasPermission("branch_management_update")&&e.jsx(E,{onClick:()=>i(`${m.BRANCHES.CREATE}?id=${a.id}`)}),r.hasPermission("branch_management_delete")&&e.jsx(A,{refetch:d,endpoint:x.branches.delete(a?.id)})]})})]},t))})]}),j()]})};export{W as default};
