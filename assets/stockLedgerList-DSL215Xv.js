import{r,a as S,j as t,h as N,e as _}from"./index-MQ8CVW85.js";import{L as v}from"./ListWrapper-CHIkK2Fp.js";import{T as A,a as D,b as a}from"./TableWrapper-D_nharFo.js";import{T as L}from"./TableRow-DHV8ZUBZ.js";import{u as q}from"./usePagination-CS3eSW2a.js";import{T as I}from"./TextInput-Dw2FCmT_.js";const B=()=>{const{page:d,rowsPerPage:l,setTotal:m,renderPagination:h}=q(),[p,u]=r.useState([]),{user:x,selectedBranchId:n}=S(),[c,y]=r.useState(""),[o,j]=r.useState(""),f=e=>{if(!e)return{ymd:"",dmy:""};const[s]=e.split("T"),[i,b,T]=s.split("-");return{ymd:s,dmy:`${T}-${b}-${i}`}};r.useEffect(()=>{const e=setTimeout(()=>{j(c)},300);return()=>clearTimeout(e)},[c]);const g=async()=>{try{const e=await N.get(_.stock_ledger.items,{params:{page:d+1,rowsPerPage:l,...n&&{branch_id:n},...o&&{search:o}}}),s=e.data?.items??[],i=e.data?.pagination;u(s),i?.total!==void 0&&m(i.total)}catch(e){console.error("Failed to fetch stock ledger",e)}};return r.useEffect(()=>{g()},[d,l,n,x,o]),t.jsxs(v,{title:"Stock Ledger List",children:[t.jsx("div",{className:"mb-4 mt-4",children:t.jsx(I,{placeholder:"Search by item name...",value:c,onChange:e=>y(e.target.value),className:"max-w-md"})}),t.jsxs(A,{children:[t.jsx(D,{cols:[{title:"Date"},{title:"Item Name"},{title:"Item Description"},{title:"Received Qty"},{title:"Issued Qty"},{title:"Deposited Qty"},{title:"Balance Qty"},{title:"Rejected Qty"}]}),t.jsx("tbody",{children:p.map((e,s)=>t.jsxs(L,{children:[t.jsx(a,{className:"px-5",children:s+1}),t.jsx(a,{children:f(e.created_at).dmy}),t.jsx(a,{children:e?.item_name||"N/A"}),t.jsx(a,{children:e?.description||"N/A"}),t.jsx(a,{children:e?.received_quantity||"N/A"}),t.jsx(a,{children:e?.issued_quantity||"N/A"}),t.jsx(a,{children:e?.deposited_quantity||"N/A"}),t.jsx(a,{children:e?.balance_quantity||"0"}),t.jsx(a,{children:e?.rejected_quantity||"0"})]},e.id))})]}),h()]})};export{B as default};
