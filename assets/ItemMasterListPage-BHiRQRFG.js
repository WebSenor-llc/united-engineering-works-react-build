import{r as s,u as P,j as e,P as p,A as h,e as x,h as S}from"./index-XrqdkMlQ.js";import{L as A}from"./ListWrapper-n8s5LAbo.js";import{T as I}from"./TableActions-BqxsRnCX.js";import{T as r}from"./TableData-D2335yaW.js";import{T as v}from"./TableDelete-RE0NQPTb.js";import{T as y}from"./TableEdit-sJQZlFPJ.js";import{T as C,a as L}from"./TableWrapper-BfKmYKz6.js";import{T as M}from"./TableRow-DbFK36gc.js";import{u as N}from"./usePagination-1AUtPZm0.js";import{L as R}from"./Loading-De0ina5-.js";import{T as k}from"./TextInput-CyxRsiph.js";const G=()=>{const{page:o,rowsPerPage:n,setTotal:u,renderPagination:T}=N(),[f,g]=s.useState([]),[j,m]=s.useState(!1),[a,_]=s.useState(""),[c,E]=s.useState(""),l=P();s.useEffect(()=>{const t=setTimeout(()=>{(a.length>=3||a==="")&&E(a)},300);return()=>clearTimeout(t)},[a]);const d=async()=>{m(!0);try{const t=await S.get(x.item_master.items,{params:{page:o+1,per_page:n,item_name:c||void 0}}),{items:i,pagination:b}=t.data;g(i),u(b.last_page)}catch(t){console.log(t)}finally{m(!1)}};return s.useEffect(()=>{d()},[o,n,c]),e.jsxs(A,{title:"Item Master",createOnClick:p.hasPermission("master_data_create_items")?()=>l(h.ITEM_MASTER.CREATE):void 0,children:[e.jsx("div",{className:"mb-4 mt-4 px-4 md:px-0",children:e.jsx(k,{placeholder:"Search by item name...",value:a,onChange:t=>_(t.target.value),className:"max-w-md"})}),j?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(R,{})}):e.jsxs(C,{children:[e.jsx(L,{cols:[{title:"Item Name"},{title:"Item Code"},{title:"Opening Stock"},{title:"Actions"}]}),e.jsx("tbody",{children:f.map((t,i)=>e.jsxs(M,{children:[e.jsx(r,{className:"px-5",children:o*n+i+1}),e.jsx(r,{children:t.item_name}),e.jsx(r,{children:t.item_code}),e.jsx(r,{children:t.current_stock}),p.hasPermission("master_data_update_masters")&&e.jsx(r,{children:e.jsxs(I,{children:[e.jsx(y,{onClick:()=>l(`${h.ITEM_MASTER.CREATE}?editId=${t.id}`)}),e.jsx(v,{refetch:d,endpoint:x.item_master.delete(t?.id)})]})})]},i))})]}),T()]})};export{G as default};
