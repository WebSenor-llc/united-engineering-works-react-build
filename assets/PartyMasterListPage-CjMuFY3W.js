import{u,a as A,r,j as e,P as m,A as p,e as h,h as _}from"./index-DHxjsmS_.js";import{L as N}from"./ListWrapper-Cc4XzfgT.js";import{T as w,a as b}from"./TableDelete-CBS2zXrt.js";import{T as E,a as R,b as a}from"./TableWrapper-Cc34JFCi.js";import{T as L}from"./TableEdit-DAgKBokJ.js";import{T as S}from"./TableRow-CUJFv1cP.js";import{u as C}from"./usePagination-CsbUaw-r.js";import{L as M}from"./Loading-CxrkmpiL.js";const B=()=>{const l=u(),{page:o,rowsPerPage:n,setTotal:x,renderPagination:j}=C(),{selectedBranchId:i}=A(),[P,T]=r.useState([]),[f,c]=r.useState(!1),d=async()=>{c(!0);try{const s=await _.get(h.party_master.parties,{params:{page:o+1,per_page:n,...i&&{branch_id:i}}});console.log(s.data);const{parties:t,pagination:g}=s.data;console.log(t),T(t),x(g.total)}catch(s){console.log(s)}finally{c(!1)}};return r.useEffect(()=>{d()},[o,n,i]),e.jsxs(N,{title:"Party Master",createOnClick:m.hasPermission("master_data_create_parties")?()=>l(p.PARTY_MASTER.CREATE):void 0,children:[f?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(M,{})}):e.jsxs(E,{children:[e.jsx(R,{cols:[{title:"Vender Name"},{title:"Address"},{title:"Email"},{title:"Mobile No"},{title:"Pin Code"},{title:"State"},{title:"District"},{title:"Actions"}]}),e.jsx("tbody",{children:P.map((s,t)=>e.jsxs(S,{children:[e.jsx(a,{className:"w-12 text-center font-medium",children:t+1}),e.jsx(a,{className:"w-48",children:s.party_name}),e.jsx(a,{className:"w-64",children:s.address}),e.jsx(a,{className:"w-56",children:s.email}),e.jsx(a,{className:"w-36",children:s.phone}),e.jsx(a,{className:"w-24",children:s.pincode}),e.jsx(a,{className:"w-32",children:s.state}),e.jsx(a,{className:"w-32",children:s.city}),e.jsx(a,{className:"w-20",children:m.hasPermission("master_data_update_masters")&&e.jsxs(w,{children:[e.jsx(L,{onClick:()=>l(`${p.PARTY_MASTER.CREATE}?id=${s.id}`)}),e.jsx(b,{refetch:d,endpoint:h.party_master.delete(s?.id)})]})})]},t))})]}),j()]})};export{B as default};
