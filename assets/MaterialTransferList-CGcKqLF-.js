import{u as b,r as c,a as E,j as t,A as d,h as m,e as f,y as T}from"./index-Dpd7qybE.js";import{L as R}from"./ListWrapper-BE1d8M7S.js";import{T as _,a as P,b as r}from"./TableWrapper-DtKbbg8N.js";import{T as D}from"./TableRow-DkGT6S5k.js";import{u as F}from"./usePagination-CTvTl5R7.js";import{T as M,a as N}from"./TableDelete-DH9r8gXr.js";import{T as g}from"./TableEdit-CDNZJjSB.js";const v=()=>{const{renderPagination:h}=F(),i=b(),[p,u]=c.useState([]),{user:n,selectedBranchId:o}=E(),x=e=>{if(!e)return{ymd:"",dmy:""};const[a]=e.split("T"),[s,j,y]=a.split("-");return{ymd:a,dmy:`${y}-${j}-${s}`}},l=async()=>{try{const e=o||n?.branch_id,a=await m.get(f.material_transfer.items,{params:e?{branch_id:e}:{}}),s=a.data?.data?.transfers||a.data?.transfers||[];u(s)}catch(e){console.error("Failed to fetch material transfers",e)}};c.useEffect(()=>{l()},[o,n]);const A=async e=>{try{await m.delete(f.material_transfer.delete(e)),T.success("Material transfer deleted successfully"),l()}catch(a){console.error("Failed to delete material transfer",a),T.error("Failed to delete material transfer")}};return t.jsxs(R,{title:"Material Transfer",createOnClick:()=>i(d.MATERIAL_TRANSFER.CREATE),children:[t.jsxs(_,{children:[t.jsx(P,{cols:[{title:"Date"},{title:"Transfer From"},{title:"Transfer To"},{title:"Material Request"},{title:"Actions"}]}),t.jsx("tbody",{children:p.map((e,a)=>t.jsxs(D,{children:[t.jsx(r,{children:a+1}),t.jsx(r,{children:x(e.created_at).dmy}),t.jsx(r,{children:e.transfer_from||"N/A"}),t.jsx(r,{children:e.transfer_to||"N/A"}),t.jsx(r,{children:e?.mr||"N/A"}),t.jsxs(M,{children:[t.jsx(g,{onClick:()=>i(`${d.MATERIAL_TRANSFER.CREATE}?editId=${e.id}`)}),t.jsx(N,{onClick:()=>A(e.id)})]})]},e.id))})]}),h()]})};export{v as default};
