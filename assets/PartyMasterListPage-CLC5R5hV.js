import{u as A,r as i,j as e,H as b,P as h,A as x,e as j,h as S}from"./index-BS_GYby9.js";import{L as E}from"./ListWrapper-JMuM9vHA.js";import{T as y}from"./TableActions-DAQeH8JT.js";import{T as a}from"./TableData-Swdp7qsk.js";import{T as R}from"./TableDelete-CrcliGXO.js";import{T as v}from"./TableEdit-JwkDstuP.js";import{T as L,a as C}from"./TableWrapper-rm6emJmV.js";import{T as M}from"./TableRow-B1eYqaZX.js";import{L as H}from"./Loading-BpKwKdhz.js";import{u as D}from"./usePagination-C4nZNDke.js";const F=()=>{const n=A(),[o,f]=i.useState([]),[T,m]=i.useState(!1),[r,g]=i.useState(""),{page:l,rowsPerPage:c,setTotal:P,renderPagination:u}=D(),d=async s=>{m(!0);try{const t={page:l+1,per_page:c};s&&(t.search=s);const p=await S.get(j.party_master.parties,{params:t}),{parties:w}=p.data,{pagination:_}=p.data;f(w),P(_?.last_page||0)}catch(t){console.log(t)}finally{m(!1)}};i.useEffect(()=>{d(r)},[r,l,c]);const N=s=>{g(s)};return e.jsxs(E,{title:"Party Master",createOnClick:h.hasPermission("master_data_create_parties")?()=>n(x.PARTY_MASTER.CREATE):void 0,children:[e.jsx("div",{className:"mb-4",children:e.jsx(b,{placeholder:"Search by party name...",onSearch:N,className:"w-full sm:w-96"})}),T?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(H,{})}):e.jsxs(L,{children:[e.jsx(C,{cols:[{title:"Vender Name"},{title:"Address"},{title:"Email"},{title:"Mobile No"},{title:"Pin Code"},{title:"State"},{title:"District"},{title:"Actions"}]}),e.jsx("tbody",{children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center py-8 text-gray-500",children:r?"No parties found matching your search":"No parties available"})}):o.map((s,t)=>e.jsxs(M,{children:[e.jsx(a,{className:"w-12 text-center font-medium",children:l*c+t+1}),e.jsx(a,{className:"w-48",children:s.party_name}),e.jsx(a,{className:"w-64",children:s.address}),e.jsx(a,{className:"w-56",children:s.email}),e.jsx(a,{className:"w-36",children:s.phone}),e.jsx(a,{className:"w-24",children:s.pincode}),e.jsx(a,{className:"w-32",children:s.state}),e.jsx(a,{className:"w-32",children:s.city}),e.jsx(a,{className:"w-20",children:h.hasPermission("master_data_update_masters")&&e.jsxs(y,{children:[e.jsx(v,{onClick:()=>n(`${x.PARTY_MASTER.CREATE}?id=${s.id}`)}),e.jsx(R,{refetch:()=>d(r),endpoint:j.party_master.delete(s?.id)})]})})]},t))})]}),u()]})};export{F as default};
