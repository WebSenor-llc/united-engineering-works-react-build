import{u as _,a as P,r as i,j as s,P as m,A as p,e as u,h as b}from"./index-Cljs0C-M.js";import{L as A}from"./ListWrapper-CKiJTCq-.js";import{T as E,a as U}from"./TableDelete-C2E6Q8LB.js";import{T as y,a as L,b as r}from"./TableWrapper-D0x0lFKt.js";import{T as N}from"./TableEdit-BhFVQjW8.js";import{T as R}from"./TableRow-D3Eqxb8Z.js";import{u as S}from"./usePagination-Cd_HJdu7.js";import{L as v}from"./Loading-B5F64OcS.js";const $=()=>{const n=_(),{page:o,rowsPerPage:l,setTotal:h,renderPagination:T}=S(),{selectedBranchId:a}=P(),[f,g]=i.useState([]),[x,c]=i.useState(!1),d=async()=>{c(!0);try{const t=await b.get(u.unit_master.units,{params:{page:o+1,per_page:l,...a&&{branch_id:a}}}),{units:e,pagination:j}=t.data;console.log(e),g(e),h(j.total)}catch(t){console.log(t)}finally{c(!1)}};return i.useEffect(()=>{d()},[o,l,a]),s.jsxs(A,{title:"Unit Master",createOnClick:m.hasPermission("master_data_create_units")?()=>n(p.UNIT_MASTER.CREATE):void 0,children:[x?s.jsx("div",{className:"flex justify-center py-10",children:s.jsx(v,{})}):s.jsxs(y,{children:[s.jsx(L,{cols:[{title:"Unit Name"},{title:"Short Name"},{title:"Actions"}]}),s.jsx("tbody",{children:f.map((t,e)=>s.jsxs(R,{children:[s.jsx(r,{children:e+1}),s.jsx(r,{children:t.unit_name}),s.jsx(r,{children:t.unit_symbol}),m.hasPermission("master_data_update_masters")&&s.jsxs(E,{children:[s.jsx(N,{onClick:()=>n(`${p.UNIT_MASTER.CREATE}?id=${t?.id}`)}),s.jsx(U,{refetch:d,endpoint:u.unit_master.delete(t?.id)})]})]},e))})]}),T()]})};export{$ as default};
