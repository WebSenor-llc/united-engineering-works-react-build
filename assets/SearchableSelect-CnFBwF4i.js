import{r as t,j as s,ai as z,m as O}from"./index-DSLs68fz.js";const B=t.forwardRef(({options:h,value:v,onChange:y,placeholder:E="Select",disabled:x,error:u,className:S,onSearch:m},j)=>{const[r,o]=t.useState(!1),[a,c]=t.useState(""),[n,R]=t.useState(""),[i,L]=t.useState({top:0,left:0,width:0}),d=t.useRef(null),w=t.useRef(null),N=t.useRef(null);t.useImperativeHandle(j,()=>({close:()=>{o(!1),c("")}}));const f=h??[],C=f.find(e=>e.value===v);t.useEffect(()=>{const e=setTimeout(()=>{R(a),m?.(a)},300);return()=>clearTimeout(e)},[a,m]);const g=n.length>=3?f.filter(e=>e.label.toLowerCase().includes(n.toLowerCase())):f,l=()=>{if(d.current){const e=d.current.getBoundingClientRect();L({top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width})}};t.useEffect(()=>(r&&(l(),window.addEventListener("resize",l),window.addEventListener("scroll",l,!0)),()=>{window.removeEventListener("resize",l),window.removeEventListener("scroll",l,!0)}),[r]),t.useEffect(()=>{const e=p=>{const b=p.target,I=d.current?.contains(b),k=w.current?.contains(b);!I&&!k&&(o(!1),c(""))};return r&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[r]);const D=()=>r?a:C?.label||"";return s.jsxs("div",{className:"relative w-full",ref:d,children:[s.jsx("input",{ref:N,type:"text",disabled:x,value:D(),placeholder:E,onFocus:()=>{o(!0)},onChange:e=>{c(e.target.value),o(!0)},className:O("disabled:cursor-not-allowed disabled:opacity-80 w-full rounded-lg border px-4 py-3 text-gray-900 focus:outline-none text-sm",u?"border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","bg-gray-50",S)}),r&&!x&&z.createPortal(s.jsxs("div",{ref:w,className:"absolute z-[50] rounded-lg border border-gray-300 bg-white shadow-lg max-h-60 overflow-auto",style:{top:i.top+4,left:i.left,width:i.width,boxShadow:"0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},children:[n.length>0&&n.length<3&&s.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Type at least 3 characters"}),n.length>=3&&g.length===0&&s.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No results found"}),g.map(e=>s.jsx("div",{className:"px-4 py-2 text-sm cursor-pointer hover:bg-blue-50 border-b border-gray-100 last:border-b-0",onMouseDown:p=>{p.preventDefault()},onClick:()=>{y(e.value),o(!1),c("")},children:e.label},e.value))]}),document.body),u&&s.jsx("p",{className:"text-xs text-red-500 mt-1 font-medium",children:u})]})});export{B as S};
