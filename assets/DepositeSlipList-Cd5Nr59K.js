import{u as D,r as c,a as E,j as t,A as n,h as p,e as m,y as h}from"./index-zSIHDd_i.js";import{L as P}from"./ListWrapper-DoFaRH6P.js";import{T as _,a as S,b as a}from"./TableWrapper-Bwk1LSIu.js";import{T as A}from"./TableRow-F8MSZPbu.js";import{u as I}from"./usePagination-mcOS4Aak.js";import{T as g,a as C}from"./TableDelete-BEyOmHVS.js";import{T as L}from"./TableEdit-D3e67rz4.js";const H=()=>{const{renderPagination:u}=I(),i=D(),[T,f]=c.useState([]),{user:o,selectedBranchId:d}=E(),x=e=>{if(!e)return{ymd:"",dmy:""};const[s]=e.split("T"),[r,j,b]=s.split("-");return{ymd:s,dmy:`${b}-${j}-${r}`}},l=async()=>{try{const e=d||o?.branch_id,s=await p.get(m.deposit_slip.items,{params:e?{branch_id:e}:{}}),r=s.data?.data?.slips||s.data?.slips||[];f(r)}catch(e){console.error("Failed to fetch deposit slips",e)}};c.useEffect(()=>{l()},[d,o]);const y=async e=>{try{await p.delete(m.deposit_slip.delete(e)),h.success("Deposit slip deleted successfully"),l()}catch(s){console.error("Failed to delete deposit slip",s),h.error("Failed to delete deposit slip")}};return t.jsxs(P,{title:"Deposite Slip",createOnClick:()=>i(n.DEPOSITE_SLIP.CREATE),children:[t.jsxs(_,{children:[t.jsx(S,{cols:[{title:"Date"},{title:"Deposited From"},{title:"Deposited To"},{title:"Actions"}]}),t.jsx("tbody",{children:T.map((e,s)=>t.jsxs(A,{children:[t.jsx(a,{children:s+1}),t.jsx(a,{children:x(e.created_at).dmy}),t.jsx(a,{children:e?.depositor?.full_name}),t.jsx(a,{children:e.recieved_by}),t.jsxs(g,{children:[t.jsx(L,{onClick:()=>i(`${n.DEPOSITE_SLIP.CREATE}?editId=${e.id}`)}),t.jsx(C,{onClick:()=>y(e.id)})]})]},e.id))})]}),u()]})};export{H as default};
