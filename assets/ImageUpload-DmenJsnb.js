import{r as c,j as r,h as D,e as N,ae as S,af as B,y as j}from"./index-CbNhh14T.js";import{C}from"./index.esm-CzaEKZ5d.js";import{S as w}from"./Select-DdY8wYe_.js";const U=({control:i,name:n,label:a="Branch",required:d=!1,error:g,disabled:x=!1})=>{const[l,h]=c.useState([]),[m,p]=c.useState(!1);return c.useEffect(()=>{(async()=>{p(!0);try{const f=(await D.get(N.branches.branch)).data?.branches||[];h(f)}catch(s){console.error("BranchSelect: Error fetching branches:",s)}finally{p(!1)}})()},[]),r.jsx(C,{name:n,control:i,render:({field:o})=>r.jsxs(w,{...o,label:a,required:d,error:g,disabled:x||m,onChange:s=>o.onChange(Number(s.target.value)),children:[r.jsx("option",{value:"",children:m?"Loading branches...":"Select Branch"}),l.map(s=>r.jsx("option",{value:s.id,children:s.branch_name},s.id))]})})},E=({label:i="Upload related images",maxFiles:n=6,value:a=[],onChange:d,error:g})=>{const[x,l]=c.useState(!1),h=c.useRef(null),m=e=>{e.preventDefault(),l(!0)},p=e=>{e.preventDefault(),l(!1)},o=e=>{e.preventDefault(),l(!1);const t=Array.from(e.dataTransfer.files);f(t)},s=e=>{if(e.target.files){const t=Array.from(e.target.files);f(t)}},f=e=>{const t=e.filter(u=>u.type.startsWith("image/"));if(t.length!==e.length&&j.error("Only image files are allowed."),a.length+t.length>n){j.error(`You can only upload up to ${n} images.`);return}d([...a,...t])},y=e=>{const t=a.filter((u,b)=>b!==e);d(t)},v=()=>{h.current?.click()};return r.jsxs("div",{className:"w-full",children:[i&&r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i," (Max ",n,")"]}),a.length<n&&r.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 flex flex-col items-center justify-center cursor-pointer transition-colors ${x?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 bg-gray-50"}`,onDragOver:m,onDragLeave:p,onDrop:o,onClick:v,children:[r.jsx("input",{type:"file",ref:h,className:"hidden",accept:"image/*",multiple:!0,onChange:s}),r.jsx(S,{className:"text-4xl text-gray-400 mb-2"}),r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Drag & Drop"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"or select files from device"})]}),a.length>0&&r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mt-4",children:a.map((e,t)=>{const u=typeof e=="string"?e:URL.createObjectURL(e);return r.jsxs("div",{className:"relative group aspect-square",children:[r.jsx("img",{src:u,alt:`Preview ${t}`,className:"w-full h-full object-cover rounded-lg border border-gray-200"}),r.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),y(t)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 transition-colors",children:r.jsx(B,{size:12})})]},t)})}),g&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:g})]})};export{U as B,E as I};
