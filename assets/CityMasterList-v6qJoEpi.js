import{u as P,r as o,j as s,P as m,A as p,e as d,h as _}from"./index-XrqdkMlQ.js";import{L as A}from"./ListWrapper-n8s5LAbo.js";import{T as E}from"./TableActions-BqxsRnCX.js";import{T as a}from"./TableData-D2335yaW.js";import{T as b}from"./TableDelete-RE0NQPTb.js";import{T as L}from"./TableEdit-sJQZlFPJ.js";import{T as R,a as S}from"./TableWrapper-BfKmYKz6.js";import{T as v}from"./TableRow-DbFK36gc.js";import{u as M}from"./usePagination-1AUtPZm0.js";import{L as N}from"./Loading-De0ina5-.js";const q=()=>{const n=P(),{page:i,rowsPerPage:r,setTotal:T,renderPagination:f}=M(),[x,j]=o.useState([]),[g,l]=o.useState(!1),c=async()=>{l(!0);try{const t=await _.get(d.city_master.cities,{params:{page:i+1,per_page:r}}),{data:h,pagination:u}=t,y=h.cities||[],C=u?.last_page||0;j(y),T(C)}catch(e){console.log(e)}finally{l(!1)}};return o.useEffect(()=>{c()},[i,r]),s.jsxs(A,{title:"City Master",createOnClick:m.hasPermission("master_data_read")?()=>n(p.CITY_MASTER.CREATE):void 0,children:[g?s.jsx("div",{className:"flex justify-center py-10",children:s.jsx(N,{})}):s.jsxs(R,{children:[s.jsx(S,{cols:[{title:"City Name"},{title:"State"},{title:"Actions"}]}),s.jsx("tbody",{children:x.map((e,t)=>s.jsxs(v,{children:[s.jsx(a,{className:"px-5",children:i*r+t+1}),s.jsx(a,{children:e.name}),s.jsx(a,{children:e.state?.name||"-"}),m.hasPermission("master_data_read")&&s.jsx(a,{children:s.jsxs(E,{children:[s.jsx(L,{onClick:()=>n(`${p.CITY_MASTER.CREATE}?id=${e?.id}`)}),s.jsx(b,{refetch:c,endpoint:d.city_master.delete(e?.id)})]})})]},t))})]}),f()]})};export{q as default};
