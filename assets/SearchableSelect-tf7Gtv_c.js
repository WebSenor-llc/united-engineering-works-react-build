import{r as t,j as r,aj as z,n as O}from"./index-BEme_EUt.js";const B=t.forwardRef(({options:h,value:v,onChange:y,placeholder:E="Select",disabled:x,error:u,className:S,onSearch:m},j)=>{const[s,n]=t.useState(!1),[o,c]=t.useState(""),[l,R]=t.useState(""),[i,L]=t.useState({top:0,left:0,width:0}),d=t.useRef(null),g=t.useRef(null),N=t.useRef(null);t.useImperativeHandle(j,()=>({close:()=>{n(!1),c("")}}));const f=h??[],C=f.find(e=>e.value===v);t.useEffect(()=>{if(!o||o.length<3)return;const e=setTimeout(()=>{R(o),m?.(o)},300);return()=>clearTimeout(e)},[o,m]);const w=l.length>=3?f.filter(e=>e.label.toLowerCase().includes(l.toLowerCase())):f,a=()=>{if(d.current){const e=d.current.getBoundingClientRect();L({top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width})}};t.useEffect(()=>(s&&(a(),window.addEventListener("resize",a),window.addEventListener("scroll",a,!0)),()=>{window.removeEventListener("resize",a),window.removeEventListener("scroll",a,!0)}),[s]),t.useEffect(()=>{const e=p=>{const b=p.target,I=d.current?.contains(b),k=g.current?.contains(b);!I&&!k&&(n(!1),c(""))};return s&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s]);const D=()=>s?o:C?.label||"";return r.jsxs("div",{className:"relative w-full",ref:d,children:[r.jsx("input",{ref:N,type:"text",disabled:x,value:D(),placeholder:E,onFocus:()=>{n(!0)},onChange:e=>{c(e.target.value),n(!0)},className:O("disabled:cursor-not-allowed disabled:opacity-80 w-full rounded-lg border px-4 py-3 text-gray-900 focus:outline-none text-sm",u?"border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-500","bg-gray-50",S)}),s&&!x&&z.createPortal(r.jsxs("div",{ref:g,className:"absolute z-[50] rounded-lg border border-gray-300 bg-white shadow-lg max-h-60 overflow-auto",style:{top:i.top+4,left:i.left,width:i.width,boxShadow:"0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},children:[l.length>0&&l.length<3&&r.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Type at least 3 characters"}),l.length>=3&&w.length===0&&r.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No results found"}),w.map(e=>r.jsx("div",{className:"px-4 py-2 text-sm cursor-pointer hover:bg-blue-50 border-b border-gray-100 last:border-b-0",onMouseDown:p=>{p.preventDefault()},onClick:()=>{y(e.value),n(!1),c("")},children:e.label},e.value))]}),document.body),u&&r.jsx("p",{className:"text-xs text-red-500 mt-1 font-medium",children:u})]})});export{B as S};
