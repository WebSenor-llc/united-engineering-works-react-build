import{g as b,u as N,r as c,y as m,A as g,j as e,D as o,h as f,e as _}from"./index-BYQAWDKy.js";import{L as R}from"./Loading-C4qpvyij.js";import{N as v}from"./NoDataFound-B2nkuDOd.js";import{B as P}from"./BackButton-DnZXduaT.js";import{T,a as D}from"./TableWrapper-DjDxEdMk.js";import{T as A}from"./TableRow-CZT0r12O.js";import{T as n}from"./TableData-DZNs_4QR.js";const r=i=>i&&(typeof i=="string"||typeof i=="number")?i:"--",q=()=>{const{id:i}=b(),d=N(),[s,u]=c.useState(null),[h,x]=c.useState(!0),p=async()=>{x(!0);try{const t=await f.get(_.returnable_gate_pass.details(parseInt(i,10))),a=t.data?.gate_pass||t.data?.data||t.data;u(a)}catch(t){console.error("Error fetching gate pass details:",t),m.error("Failed to load gate pass details"),d(g.RETURNABLE_GATEPAS.LIST)}finally{x(!1)}};c.useEffect(()=>{if(!i){m.error("Invalid gate pass ID"),d(g.RETURNABLE_GATEPAS.LIST);return}p()},[i,d]);const j=t=>{const l={pending:{color:"bg-yellow-100 text-yellow-800",text:"Pending"},approved:{color:"bg-green-100 text-green-800",text:"Approved"},rejected:{color:"bg-red-100 text-red-800",text:"Rejected"},completed:{color:"bg-blue-100 text-blue-800",text:"Completed"},returned:{color:"bg-purple-100 text-purple-800",text:"Returned"}}[t]||{color:"bg-gray-100 text-gray-800",text:t||"Unknown"};return e.jsx("span",{className:`inline-flex ml-2 px-2 py-1 text-xs font-medium rounded-full ${l.color}`,children:l.text})},y=t=>{const l={pending:{color:"bg-yellow-100 text-yellow-800",text:"Pending Return"},partial:{color:"bg-orange-100 text-orange-800",text:"Partially Returned"},returned:{color:"bg-green-100 text-green-800",text:"Fully Returned"},not_applicable:{color:"bg-gray-100 text-gray-800",text:"N/A"}}[t]||{color:"bg-gray-100 text-gray-800",text:t||"Unknown"};return e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${l.color}`,children:l.text})};return h?e.jsx(R,{}):s?e.jsxs("div",{className:"max-w-6xl mx-auto min-h-screen p-4 bg-gray-50 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{}),e.jsx("h2",{className:"text-xl font-semibold",children:"Returnable Gate Pass Details"})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Basic Details"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("strong",{children:"Status:"}),j(s.status)]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Gate Pass Number:"})," ",r(s.gate_pass_number)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",o.dateWithTime(s.created_at)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Purpose:"})," ",r(s.purpose)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Vehicle Number:"})," ",r(s.vehicle_number)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Driver Name:"})," ",r(s.driver_name)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Expected Return Date:"})," ",s.expected_return_date?o.date(s.expected_return_date):"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Actual Return Date:"})," ",s.actual_return_date?o.date(s.actual_return_date):"--"]})]})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Party Details"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Party Name:"})," ",r(s.party_name)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Party Address:"})," ",r(s.party_address)]})]})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Branch & Employee Details"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Branch Name:"})," ",r(s.branch?.branch_name)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Branch Address:"})," ",r(s.branch?.address)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Employee Name:"})," ",r(s.emp_name)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Employee Address:"})," ",r(s.emp_address)]})]})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Items"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(T,{children:[e.jsx(D,{cols:[{title:"S.No."},{title:"Item Name"},{title:"Item Code"},{title:"Item Description"},{title:"Unit"},{title:"Quantity Out"},{title:"Quantity Returned"},{title:"Return Status"},{title:"Description/Remarks"}]}),e.jsx("tbody",{children:s.items&&s.items.length>0?s.items.map((t,a)=>e.jsxs(A,{children:[e.jsx(n,{className:"text-center",children:a+1}),e.jsx(n,{children:r(t.item?.item_name)}),e.jsx(n,{children:r(t.item?.item_code)}),e.jsx(n,{className:"text-sm",children:r(t.item?.item_description)}),e.jsx(n,{children:r(t.item?.unit?.unit_name)}),e.jsx(n,{className:"text-center",children:t.quantity_out||0}),e.jsx(n,{className:"text-center",children:t.quantity_returned||0}),e.jsx(n,{className:"text-center",children:y(t.return_status)}),e.jsx(n,{children:r(t.item_description)})]},t.id||a)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-4",children:"No items found"})})})]})})]}),s.items?.length>0&&e.jsxs("div",{className:"bg-white border p-6 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Summary"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Total Items:"})," ",s.items.length]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Quantity Out:"})," ",s.items.reduce((t,a)=>t+(Number(a.quantity_out)||0),0)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Quantity Returned:"})," ",s.items.reduce((t,a)=>t+(Number(a.quantity_returned)||0),0)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pending Return:"})," ",s.items.reduce((t,a)=>t+((Number(a.quantity_out)||0)-(Number(a.quantity_returned)||0)),0)]})]})]})]}):e.jsx(v,{})};export{q as default};
