import{u as P,a as T,r,j as e,A as y,h as u,e as g,y as n}from"./index-DQLLPGln.js";import{L as _}from"./ListWrapper-BG9lLSAN.js";import{T as A,a as E,b as s}from"./TableWrapper-dhiQGSew.js";import{T as L}from"./TableRow-BJ6MC2zs.js";import{u as N}from"./usePagination-BbkvL3z1.js";import{T as R}from"./TableActions-BtqL2JIQ.js";import{T as D}from"./TableDelete-DNYHMsVC.js";import{L as S}from"./Loading-B1xtHlfm.js";const W=()=>{const{page:o,rowsPerPage:l,setTotal:m,renderPagination:h}=N(),x=P(),{selectedBranchId:i}=T(),[c,f]=r.useState([]),[j,d]=r.useState(!1),p=async()=>{d(!0);try{const t=await u.get(g.returnable_gate_pass.items,{params:{page:o+1,rowsPerPage:l,branch_id:i}}),a=t.data?.pagination;f(t.data.gate_passes||[]),a?.total!==void 0&&m(a.total)}catch(t){console.error("Error fetching gate passes:",t),n.error("Failed to load returnable gate passes")}finally{d(!1)}};r.useEffect(()=>{p()},[o,l,i]);const b=async t=>{try{await u.delete(g.returnable_gate_pass.delete(t)),n.success("Returnable gate pass deleted successfully"),p()}catch(a){console.error("Failed to delete gate pass",a),n.error(a?.response?.data?.message||"Failed to delete returnable gate pass")}};return e.jsxs(_,{title:"Returnable GatePass List",createOnClick:()=>x(y.RETURNABLE_GATEPAS.CREATE),children:[j?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(S,{})}):e.jsxs(A,{children:[e.jsx(E,{cols:[{title:"Date"},{title:"Party Name"},{title:"Purpose"},{title:"Vehicle Number"},{title:"Action"}]}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"No returnable gate passes found"})}):c.map((t,a)=>e.jsxs(L,{children:[e.jsx(s,{className:"px-5",children:a+1}),e.jsx(s,{children:new Date(t.gate_pass_date||t.created_at||"").toLocaleDateString()}),e.jsx(s,{children:t.party_name}),e.jsx(s,{children:t.purpose}),e.jsx(s,{children:t.vehicle_number}),e.jsx(s,{children:e.jsx(R,{children:e.jsx(D,{onClick:()=>b(t.id)})})})]},t.id))})]}),h()]})};export{W as default};
