import{u as A,r as n,a as E,j as e,A as f,h as x,e as j,y as i}from"./index-DwoM2qi7.js";import{L as P}from"./ListWrapper-mZr8QSqo.js";import{T as R,a as L,b as s}from"./TableWrapper-DLZJWVQL.js";import{T as G}from"./TableRow-BkphMLHV.js";import{u as v}from"./usePagination-DH6j26d8.js";import{T as C}from"./TableActions-D7fIJDeW.js";import{T as D}from"./TableEdit-g6OANowM.js";import{T as S}from"./TableDelete-DctBftCp.js";import{L as $}from"./Loading-JYq8HBew.js";const V=()=>{const{page:l,rowsPerPage:c,setTotal:T,renderPagination:b}=v(),d=A(),[p,m]=n.useState([]),[g,h]=n.useState(!1),{selectedBranchId:u}=E(),y=t=>{if(!t)return"";const[a]=t.split("T"),[r,o,N]=a.split("-");return`${N}-${o}-${r}`};n.useEffect(()=>{(async()=>{h(!0);try{const a=await x.get(j.non_returnable_gate_pass.items,{params:{page:l+1,rowsPerPage:c,branch_id:u}}),r=a.data?.gate_passes||a.data?.data||a.data||[],o=a.data?.pagination;m(r),o?.total!==void 0&&T(o.total)}catch(a){console.error("Failed to fetch non-returnable gate passes",a),i.error("Failed to load gate passes")}finally{h(!1)}})()},[l,c,u]);const _=async t=>{try{await x.delete(j.non_returnable_gate_pass.delete(t)),m(a=>a.filter(r=>r.id!==t)),i.success("Gate pass deleted successfully")}catch(a){console.error("Failed to delete gate pass",a),i.error("Failed to delete gate pass")}};return e.jsxs(P,{title:"Non Returnable Gate Pass List",createOnClick:()=>d(f.NON_RETURNABLE_GATEPAS.CREATE),children:[g?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx($,{})}):e.jsxs(R,{children:[e.jsx(L,{cols:[{title:"Date"},{title:"Party Name"},{title:"Purpose"},{title:"Vehicle Number"},{title:"Actions"}]}),e.jsx("tbody",{children:p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"No gate passes found"})}):p.map((t,a)=>e.jsxs(G,{children:[e.jsx(s,{className:"px-5",children:a+1}),e.jsx(s,{children:y(t.created_at||t.date)}),e.jsx(s,{children:t.party_name||"-"}),e.jsx(s,{children:t.purpose||"-"}),e.jsx(s,{children:t.vehicle_number||"-"}),e.jsx(s,{children:e.jsxs(C,{children:[e.jsx(D,{onClick:()=>d(`${f.NON_RETURNABLE_GATEPAS.CREATE}?editId=${t.id}`)}),e.jsx(S,{onClick:()=>_(t.id)})]})})]},t.id))})]}),b()]})};export{V as default};
