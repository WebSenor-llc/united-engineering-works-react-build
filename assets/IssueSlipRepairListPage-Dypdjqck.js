import{u as N,r as n,j as e,D as T,A as x,e as m,h as _}from"./index-CJSsBkhT.js";import{L as b}from"./ListWrapper-B-2AH1s6.js";import{T as y,a as E,b as a}from"./TableWrapper-Dj27ssIq.js";import{T as S}from"./TableRow-DSWYAKtL.js";import{T as P}from"./TableActions-DOn7XnR-.js";import{T as A}from"./TableEdit-BzgsmVMj.js";import{T as I}from"./TableDelete-DvDgU1bD.js";import{u as v}from"./usePagination-iM4RzRER.js";const k=()=>{const{page:i,rowsPerPage:l,setTotal:h,renderPagination:u}=v(),c=N(),[t,j]=n.useState([]),[f,o]=n.useState(!0),d=async()=>{o(!0);try{const s={page:i+1,rowsPerPage:l},r=await _.get(m.repair_issue_slip.list,{params:s}),g=r.data?.data||[],p=r.data?.pagination;j(g),p?.total!==void 0&&h(p.total)}catch(s){console.error("Error fetching issue slips:",s)}finally{o(!1)}};return n.useEffect(()=>{d()},[i,l]),e.jsx("div",{className:"space-y-6",children:e.jsxs(b,{title:`Issue Slips (${t.length})`,createOnClick:()=>c(x.REPAIR_ISSUE_SLIP.CREATE),children:[e.jsxs(y,{children:[e.jsx(E,{cols:[{title:"Repair Item"},{title:"To Whom"},{title:"Created Date"},{title:"Actions"}]}),e.jsx("tbody",{children:f&&t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Loading issue slips..."})]})})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"No issue slips found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Issue slips will appear here once created."})]})})}):t.map((s,r)=>e.jsxs(S,{children:[e.jsx(a,{className:"px-5",children:i*l+r+1}),e.jsx(a,{children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.inhouse_deposit_slip?.repair_item||"N/A"})}),e.jsx(a,{children:e.jsx("div",{className:"text-sm text-gray-900",children:s.to_whom_user?.full_name||s.other||"N/A"})}),e.jsx(a,{className:"w-40",children:e.jsx("div",{className:"text-sm text-gray-500",children:T.date(s.created_at)})}),e.jsx(a,{className:"w-32",children:e.jsxs(P,{children:[e.jsx(A,{onClick:()=>c(`${x.REPAIR_ISSUE_SLIP.CREATE}?editId=${s.id}`)}),e.jsx(I,{refetch:d,endpoint:m.repair_issue_slip.delete(s.id)})]})})]},s.id))})]}),t.length>0&&u()]})})};export{k as default};
