import{u,l as j,r as n,j as e,D as p,h as g,e as N}from"./index-aHpIp7Ij.js";import{B as b}from"./BackButton-CKrhximL.js";import{L as f}from"./Loading-npeXMvUA.js";import{N as y}from"./NoDataFound-DrVioPvb.js";import{T as D,a as I,b as a}from"./TableWrapper-jv708q_S.js";import{T as v}from"./TableRow-CUivvRdm.js";const Q=()=>{u();const{id:i}=j(),[m,c]=n.useState(!1),[s,x]=n.useState(null),h=async()=>{c(!0);try{const t=await g.get(N.issue_slips.details(Number(i))),r=t.data.slip||t.data.data||t.data;x(r)}catch(t){console.error(t)}finally{c(!1)}};return n.useEffect(()=>{i&&h()},[i]),m?e.jsx(f,{}):s?e.jsxs("div",{className:"max-w-6xl mx-auto min-h-screen p-4 bg-gray-50 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{}),e.jsx("h2",{className:"text-xl font-semibold",children:"Issue Slip Details"})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl space-y-4",children:[e.jsx("div",{className:"flex items-center gap-2 text-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Basic Details"})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Issue Slip ID:"})," ",s.id||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"MR Number:"})," ",s.mr||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Branch:"})," ",s.branch?.branch_name||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Machine:"})," ",s.machine?.name||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Machine Number:"})," ",s.machine?.number||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created Date:"})," ",p.dateWithTime(s.created_at)]}),e.jsxs("p",{className:"col-span-full",children:[e.jsx("strong",{children:"Purpose:"})," ",s.purpose||"--"]}),s.remarks&&e.jsxs("p",{className:"col-span-full",children:[e.jsx("strong",{children:"Remarks:"})," ",s.remarks]})]})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Items Issued"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(D,{children:[e.jsx(I,{cols:[{title:"Item Name"},{title:"Item Code"},{title:"Unit"},{title:"Required Qty"},{title:"Issued Qty"},{title:"Balance"}]}),e.jsx("tbody",{children:s.items?.length>0?s.items.map((t,r)=>{const d=Number(t.required_qty)||0,o=Number(t.issued_qty)||0,l=d-o;return e.jsxs(v,{children:[e.jsx(a,{className:"text-center",children:r+1}),e.jsx(a,{children:t.item?.item_name||"--"}),e.jsx(a,{children:t.item?.item_code||"--"}),e.jsx(a,{children:t.item?.unit?.unit_name||"--"}),e.jsx(a,{className:"text-center",children:d}),e.jsx(a,{className:"text-center",children:o}),e.jsx(a,{className:`text-center ${l>0?"text-orange-600":l<0?"text-red-600":"text-green-600"}`,children:l})]},t.id||r)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-4",children:"No Items Found"})})})]})})]}),s.items?.length>0&&e.jsxs("div",{className:"bg-white border p-6 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Summary"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Total Items:"})," ",s.items.length]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Required Qty:"})," ",s.items.reduce((t,r)=>t+(Number(r.required_qty)||0),0)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Issued Qty:"})," ",s.items.reduce((t,r)=>t+(Number(r.issued_qty)||0),0)]})]})]})]}):e.jsx(y,{})};export{Q as default};
