import{r as f,j as t,ae as D,af as N,y as p}from"./index-Cljs0C-M.js";const w=({label:c="Upload related images",maxFiles:o=6,value:s=[],onChange:i,error:d})=>{const[u,n]=f.useState(!1),g=f.useRef(null),h=e=>{e.preventDefault(),n(!0)},x=e=>{e.preventDefault(),n(!1)},b=e=>{e.preventDefault(),n(!1);const r=Array.from(e.dataTransfer.files);m(r)},j=e=>{if(e.target.files){const r=Array.from(e.target.files);m(r)}},m=e=>{const r=e.filter(l=>l.type.startsWith("image/"));if(r.length!==e.length&&p.error("Only image files are allowed."),s.length+r.length>o){p.error(`You can only upload up to ${o} images.`);return}i([...s,...r])},y=e=>{const r=s.filter((l,a)=>a!==e);i(r)},v=()=>{g.current?.click()};return t.jsxs("div",{className:"w-full",children:[c&&t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[c," (Max ",o,")"]}),s.length<o&&t.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 flex flex-col items-center justify-center cursor-pointer transition-colors ${u?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 bg-gray-50"}`,onDragOver:h,onDragLeave:x,onDrop:b,onClick:v,children:[t.jsx("input",{type:"file",ref:g,className:"hidden",accept:"image/*",multiple:!0,onChange:j}),t.jsx(D,{className:"text-4xl text-gray-400 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Drag & Drop"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"or select files from device"})]}),s.length>0&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mt-4",children:[s.map((e,r)=>{let l="";try{if(typeof e=="string")l=e;else if(e instanceof File)l=URL.createObjectURL(e);else return null}catch(a){return console.error("Error creating object URL:",a),null}return t.jsxs("div",{className:"relative group aspect-square",children:[t.jsx("img",{src:l,alt:`Preview ${r}`,className:"w-full h-full object-cover rounded-lg border border-gray-200"}),t.jsx("button",{type:"button",onClick:a=>{a.stopPropagation(),y(r)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md hover:bg-red-600 transition-colors",children:t.jsx(N,{size:12})})]},r)}).filter(Boolean)," "]}),d&&t.jsx("p",{className:"text-xs text-red-500 mt-1",children:d})]})};export{w as I};
