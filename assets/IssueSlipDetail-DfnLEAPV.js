import{u as j,l as u,r as n,j as e,D as p,h as g,e as N}from"./index-CVLuNvHl.js";import{B as b}from"./BackButton-OhCUJKaV.js";import{L as f}from"./Loading-DNOjMSnZ.js";import{N as y}from"./NoDataFound-DbhckZ-9.js";import{T as D,a as I,b as a}from"./TableWrapper-4tTsxnyx.js";import{T as v}from"./TableRow-JWYm0EGd.js";const Q=()=>{j();const{id:i}=u(),[o,c]=n.useState(!1),[t,x]=n.useState(null),h=async()=>{c(!0);try{const s=await g.get(N.issue_slips.details(Number(i))),r=s.data.slip||s.data.data||s.data;x(r)}catch(s){console.error(s)}finally{c(!1)}};return n.useEffect(()=>{i&&h()},[i]),o?e.jsx(f,{}):t?e.jsxs("div",{className:"max-w-6xl mx-auto min-h-screen p-4 bg-gray-50 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{}),e.jsx("h2",{className:"text-xl font-semibold",children:"Issue Slip Details"})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl space-y-4",children:[e.jsx("div",{className:"flex items-center gap-2 text-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Basic Details"})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Issue Slip ID:"})," ",t.id||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"MR Number:"})," ",t.mr||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Branch:"})," ",t.branch?.branch_name||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Machine:"})," ",t.machine?.name||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Machine Number:"})," ",t.machine?.number||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created Date:"})," ",p.dateWithTime(t.created_at)]}),e.jsxs("p",{className:"col-span-full",children:[e.jsx("strong",{children:"Purpose:"})," ",t.purpose||"--"]}),t.remarks&&e.jsxs("p",{className:"col-span-full",children:[e.jsx("strong",{children:"Remarks:"})," ",t.remarks]})]})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Items Issued"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(D,{children:[e.jsx(I,{cols:[{title:"Item Name"},{title:"Item Code"},{title:"Item Description"},{title:"Unit"},{title:"Required Qty"},{title:"Issued Qty"},{title:"Balance"}]}),e.jsx("tbody",{children:t.items?.length>0?t.items.map((s,r)=>{const d=Number(s.required_qty)||0,m=Number(s.issued_qty)||0,l=d-m;return e.jsxs(v,{children:[e.jsx(a,{className:"text-center",children:r+1}),e.jsx(a,{children:s.item?.item_name||"--"}),e.jsx(a,{children:s.item?.item_code||"--"}),e.jsx(a,{className:"text-sm",children:s.item?.item_description||"--"}),e.jsx(a,{children:s.item?.unit?.unit_name||"--"}),e.jsx(a,{className:"text-center",children:d}),e.jsx(a,{className:"text-center",children:m}),e.jsx(a,{className:`text-center ${l>0?"text-orange-600":l<0?"text-red-600":"text-green-600"}`,children:l})]},s.id||r)}):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-4",children:"No Items Found"})})})]})})]}),t.items?.length>0&&e.jsxs("div",{className:"bg-white border p-6 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Summary"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Total Items:"})," ",t.items.length]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Required Qty:"})," ",t.items.reduce((s,r)=>s+(Number(r.required_qty)||0),0)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Issued Qty:"})," ",t.items.reduce((s,r)=>s+(Number(r.issued_qty)||0),0)]})]})]})]}):e.jsx(y,{})};export{Q as default};
