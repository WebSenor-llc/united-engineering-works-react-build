import{a as g,r as o,u as _,j as e,P as m,A as p,e as u,h as A}from"./index-CxaHccIe.js";import{L as b}from"./ListWrapper-CtvdND4E.js";import{T as E}from"./TableActions-BZgnHhAo.js";import{T as R,a as y,b as s}from"./TableWrapper-DoifqjHm.js";import{T as C}from"./TableDelete-BJS_4gwN.js";import{T as L}from"./TableEdit-CTM_VGo9.js";import{T as S}from"./TableRow-qHkEA8Qa.js";import{u as v}from"./usePagination-DdvaIjbf.js";import{L as D}from"./Loading-Bib5yKbE.js";const W=()=>{const{page:i,rowsPerPage:n,setTotal:h,renderPagination:x}=v(),{selectedBranchId:r}=g(),[T,f]=o.useState([]),[j,l]=o.useState(!1),c=_(),d=async()=>{l(!0);try{const t=await A.get(u.product_master.products,{params:{page:i+1,rowsPerPage:n,...r&&{branch_id:r}}}),{products:a,pagination:P}=t.data;f(a),h(P.total)}catch(t){console.log(t)}finally{l(!1)}};return o.useEffect(()=>{d()},[i,n,r]),e.jsxs(b,{title:"Product Master",createOnClick:m.hasPermission("master_data_create_products")?()=>c(p.PRODUCT_MASTER.CREATE):void 0,children:[j?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(D,{})}):e.jsxs(R,{children:[e.jsx(y,{cols:[{title:"Product Name"},{title:"Source"},{title:"Quantity Required"},{title:"Alloted To"},{title:"Actions"}]}),e.jsx("tbody",{children:T.map((t,a)=>e.jsxs(S,{children:[e.jsx(s,{className:"px-5",children:a+1}),e.jsx(s,{children:t.name}),e.jsx(s,{children:t.source}),e.jsx(s,{children:t.quantity_required}),e.jsx(s,{children:t?.allocated_supervisor?.full_name||"-"}),m.hasPermission("master_data_update_products")&&e.jsx(s,{children:e.jsxs(E,{children:[e.jsx(L,{onClick:()=>c(`${p.PRODUCT_MASTER.CREATE}?editId=${t.id}`)}),e.jsx(C,{refetch:d,endpoint:u.product_master.delete(t?.id)})]})})]},a))})]}),x()]})};export{W as default};
