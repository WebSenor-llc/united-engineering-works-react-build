import{u as S,i as w,r as l,j as e,B as y,A as f,h as i,e as c,y as d}from"./index-CqGN5vPj.js";import{T as g}from"./TextInput-Bt4fc_YE.js";import{T}from"./TextArea-C1pqymuC.js";import{F as _}from"./FormHeader-DdZQymmB.js";import{L as A}from"./Loading-BaGxNgjf.js";import{o as F,c as E}from"./yup-DpSgmRLH.js";import{u as I,C as o}from"./index.esm-DANMKX6A.js";import"./BackButton-Doh_VSEt.js";const M={name:"",code:"",is_active:!0,note:""},Y=()=>{const u=S(),[h]=w(),a=h.get("id"),[j,m]=l.useState(!1),[x,p]=l.useState(!1),{control:r,handleSubmit:v,reset:C,formState:{errors:n}}=I({defaultValues:M,resolver:F(E)}),b=async()=>{if(a){m(!0);try{const t=await i.get(c.country_master.details(Number(a))),s=t.data.data||t.data||{};C({name:s.name||"",code:s.code||"",is_active:s.is_active??!0,note:s.note||""})}catch(t){console.error("Failed to load country details:",t),d.error("Failed to load country details")}finally{m(!1)}}};l.useEffect(()=>{a&&b()},[a]);const N=async t=>{p(!0);try{const s=a?c.country_master.update(Number(a)):c.country_master.create;await(a?i.put:i.post)(s,t),d.success(a?"Country Updated Successfully":"Country Created Successfully"),u(f.COUNTRY_MASTER.LIST)}catch(s){console.error(s),d.error(s.response?.data?.message||"Failed to save country")}finally{p(!1)}};return j?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(A,{})}):e.jsxs("div",{className:"w-full h-full overflow-auto space-y-8 p-4 pb-20",children:[e.jsx("div",{className:"space-y-1 ml-2",children:e.jsx(_,{title:a?"Edit Country Master":"Create Country Master",subtitle:a?"Update the country master details":"Fill out the form to create a new country master"})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mx-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{name:"name",control:r,render:({field:t})=>e.jsx(g,{required:!0,...t,label:"Country Name",error:n?.name?.message})}),e.jsx(o,{name:"code",control:r,render:({field:t})=>e.jsx(g,{required:!0,...t,label:"Country Code",error:n?.code?.message})}),e.jsx(o,{name:"is_active",control:r,render:({field:t})=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Is Active ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...t,value:t.value?"true":"false",onChange:s=>t.onChange(s.target.value==="true"),className:"w-full border border-gray-300 rounded-lg px-3 py-3 bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(o,{name:"note",control:r,render:({field:t})=>e.jsx(T,{...t,label:"Note",placeholder:"Add any additional notes or comments...",error:n?.note?.message,rows:3})})}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[e.jsx(y,{onClick:()=>u(f.COUNTRY_MASTER.LIST),variant:"outline",children:"Cancel"}),e.jsx(y,{onClick:v(N),loading:x,disabled:x,className:"bg-red-600 text-white",children:a?"Update Country":"Create Country"})]})]})]})};export{Y as default};
