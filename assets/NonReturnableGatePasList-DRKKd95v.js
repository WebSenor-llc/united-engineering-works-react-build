import{u as _,r as n,a as A,j as e,A as p,h as u,e as h,y as o}from"./index-DHxjsmS_.js";import{L as E}from"./ListWrapper-Cc4XzfgT.js";import{T as N,a as g,b as r}from"./TableWrapper-Cc34JFCi.js";import{T as R}from"./TableRow-CUJFv1cP.js";import{u as L}from"./usePagination-CsbUaw-r.js";import{T as P,a as G}from"./TableDelete-CBS2zXrt.js";import{T as C}from"./TableEdit-DAgKBokJ.js";import{L as D}from"./Loading-CxrkmpiL.js";const H=()=>{const{renderPagination:m}=L(),l=_(),[i,c]=n.useState([]),[f,d]=n.useState(!1),{selectedBranchId:x}=A(),j=t=>{if(!t)return"";const[a]=t.split("T"),[s,b,y]=a.split("-");return`${y}-${b}-${s}`};n.useEffect(()=>{(async()=>{d(!0);try{const a=await u.get(h.non_returnable_gate_pass.items),s=a.data?.gate_passes||a.data?.data||a.data||[];c(s)}catch(a){console.error("Failed to fetch non-returnable gate passes",a),o.error("Failed to load gate passes")}finally{d(!1)}})()},[x]);const T=async t=>{try{await u.delete(h.non_returnable_gate_pass.delete(t)),c(a=>a.filter(s=>s.id!==t)),o.success("Gate pass deleted successfully")}catch(a){console.error("Failed to delete gate pass",a),o.error("Failed to delete gate pass")}};return e.jsxs(E,{title:"Non Returnable Gate Pass List",createOnClick:()=>l(p.NON_RETURNABLE_GATEPAS.CREATE),children:[f?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(D,{})}):e.jsxs(N,{children:[e.jsx(g,{cols:[{title:"Date"},{title:"Party Name"},{title:"Purpose"},{title:"Vehicle Number"},{title:"Actions"}]}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"No gate passes found"})}):i.map((t,a)=>e.jsxs(R,{children:[e.jsx(r,{children:a+1}),e.jsx(r,{children:j(t.created_at||t.date)}),e.jsx(r,{children:t.party_name||"-"}),e.jsx(r,{children:t.purpose||"-"}),e.jsx(r,{children:t.vehicle_number||"-"}),e.jsxs(P,{children:[e.jsx(C,{onClick:()=>l(`${p.NON_RETURNABLE_GATEPAS.CREATE}?editId=${t.id}`)}),e.jsx(G,{onClick:()=>T(t.id)})]})]},t.id))})]}),m()]})};export{H as default};
