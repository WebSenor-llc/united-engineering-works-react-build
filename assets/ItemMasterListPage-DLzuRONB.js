import{a as _,r as i,u as E,j as e,P as d,A as p,e as h,h as P}from"./index-BAaTephW.js";import{L as A}from"./ListWrapper-BGS1Q98Q.js";import{T as b,a as I}from"./TableDelete-CFN4QaEC.js";import{T as y,a as L,b as a}from"./TableWrapper-COdvPmWW.js";import{T as M}from"./TableEdit-QMS-yEra.js";import{T as R}from"./TableRow-DjyxInc9.js";import{u as C}from"./usePagination-Dl0zsJhW.js";import{L as S}from"./Loading-I9g-LRnp.js";const B=()=>{const{page:o,rowsPerPage:n,setTotal:T,renderPagination:x}=C(),{selectedBranchId:r}=_(),[f,g]=i.useState([]),[j,l]=i.useState(!1),c=E(),m=async()=>{l(!0);try{const t=await P.get(h.item_master.items,{params:{page:o+1,per_page:n,...r&&{branch_id:r}}});console.log(t.data);const{items:s,pagination:u}=t.data;g(s),T(u.total)}catch(t){console.log(t)}finally{l(!1)}};return i.useEffect(()=>{m()},[o,n,r]),e.jsxs(A,{title:"Item Master",createOnClick:d.hasPermission("master_data_create_items")?()=>c(p.ITEM_MASTER.CREATE):void 0,children:[j?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(S,{})}):e.jsxs(y,{children:[e.jsx(L,{cols:[{title:"Item Name"},{title:"Item Code"},{title:"Quantity"},{title:"Actions"}]}),e.jsx("tbody",{children:f.map((t,s)=>e.jsxs(R,{children:[e.jsx(a,{children:s+1}),e.jsx(a,{children:t.item_name}),e.jsx(a,{children:t.item_code}),e.jsx(a,{children:t.current_stock}),d.hasPermission("master_data_update_masters")&&e.jsxs(b,{children:[e.jsx(M,{onClick:()=>c(`${p.ITEM_MASTER.CREATE}?editId=${t.id}`)}),e.jsx(I,{refetch:m,endpoint:h.item_master.delete(t?.id)})]})]},s))})]}),x()]})};export{B as default};
