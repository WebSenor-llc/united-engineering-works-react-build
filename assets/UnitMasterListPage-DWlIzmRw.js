import{u as A,a as E,r as s,j as e,P as u,A as p,e as h,h as N}from"./index-5cgORhEY.js";import{L as v}from"./ListWrapper-Blim2baA.js";import{T as y}from"./TableActions-C1Z13Nh8.js";import{T as i}from"./TableData-ONbj5s7v.js";import{T as U}from"./TableDelete-D0k4l_Ns.js";import{T as L}from"./TableEdit-tkf-WO6X.js";import{T as R,a as C}from"./TableWrapper-Dj_EV8so.js";import{T as w}from"./TableRow-CdCnKpGz.js";import{u as I}from"./usePagination-DPq9Q4TN.js";import{L as M}from"./Loading-B1FFLWWP.js";import{T as D}from"./TextInput-79R6YI_q.js";const K=()=>{const c=A(),{page:n,rowsPerPage:o,setTotal:x,renderPagination:T}=I(),{selectedBranchId:f}=E(),[g,j]=s.useState([]),[_,l]=s.useState(!1),[a,b]=s.useState(""),[m,P]=s.useState("");s.useEffect(()=>{const t=setTimeout(()=>{(a.length>=3||a==="")&&P(a)},300);return()=>clearTimeout(t)},[a]);const d=async()=>{l(!0);try{const t=await N.get(h.unit_master.units,{params:{page:n+1,per_page:o,unit_name:m||void 0}}),{units:r,pagination:S}=t.data;j(r),x(S.last_page)}catch(t){console.log(t)}finally{l(!1)}};return s.useEffect(()=>{d()},[n,o,f,m]),e.jsxs(v,{title:"Unit Master",createOnClick:u.hasPermission("master_data_create_units")?()=>c(p.UNIT_MASTER.CREATE):void 0,children:[e.jsx("div",{className:"mb-4 mt-4 px-4 md:px-0",children:e.jsx(D,{placeholder:"Search by unit name...",value:a,onChange:t=>b(t.target.value),className:"max-w-md"})}),_?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(M,{})}):e.jsxs(R,{children:[e.jsx(C,{cols:[{title:"Unit Name"},{title:"Short Name"},{title:"Actions"}]}),e.jsx("tbody",{children:g.map((t,r)=>e.jsxs(w,{children:[e.jsx(i,{className:"px-5",children:n*o+r+1}),e.jsx(i,{children:t.unit_name}),e.jsx(i,{children:t.unit_symbol}),u.hasPermission("master_data_update_masters")&&e.jsx(i,{children:e.jsxs(y,{children:[e.jsx(L,{onClick:()=>c(`${p.UNIT_MASTER.CREATE}?id=${t?.id}`)}),e.jsx(U,{refetch:d,endpoint:h.unit_master.delete(t?.id)})]})})]},r))})]}),T()]})};export{K as default};
