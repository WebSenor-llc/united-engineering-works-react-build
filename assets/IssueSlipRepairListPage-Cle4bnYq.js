import{u as T,a as _,r as l,j as e,D as b,A as m,e as h,h as S}from"./index-CyRDNjis.js";import{L as y}from"./ListWrapper-CN8TGvDX.js";import{T as E,a as A,b as a}from"./TableWrapper-CafYCdV6.js";import{T as I}from"./TableRow-D_ujNsvm.js";import{T as P}from"./TableActions-JLLjwQ35.js";import{T as v}from"./TableEdit-iRO8PJoR.js";import{T as R}from"./TableDelete-BNurekzQ.js";import{u as w}from"./usePagination-DGZ3npF3.js";const B=()=>{const{page:n,rowsPerPage:c,setTotal:u,renderPagination:j}=w(),o=T(),{selectedBranchId:i}=_(),[t,f]=l.useState([]),[g,d]=l.useState(!0),p=async()=>{d(!0);try{const s={page:n+1,rowsPerPage:c,...i&&{branch_id:i}},r=await S.get(h.repair_issue_slip.list,{params:s}),N=r.data?.data||[],x=r.data?.pagination;f(N),x?.total!==void 0&&u(x.total)}catch(s){console.error("Error fetching issue slips:",s)}finally{d(!1)}};return l.useEffect(()=>{p()},[n,c,i]),e.jsx("div",{className:"space-y-6",children:e.jsxs(y,{title:`Issue Slips (${t.length})`,createOnClick:()=>o(m.REPAIR_ISSUE_SLIP.CREATE),children:[e.jsxs(E,{children:[e.jsx(A,{cols:[{title:"Repair Item"},{title:"To Whom"},{title:"Created Date"},{title:"Actions"}]}),e.jsx("tbody",{children:g&&t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Loading issue slips..."})]})})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"No issue slips found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Issue slips will appear here once created."})]})})}):t.map((s,r)=>e.jsxs(I,{children:[e.jsx(a,{className:"px-5",children:r+1}),e.jsx(a,{children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.inhouse_deposit_slip?.repair_item||"N/A"})}),e.jsx(a,{children:e.jsx("div",{className:"text-sm text-gray-900",children:s.to_whom_user?.full_name||s.other||"N/A"})}),e.jsx(a,{className:"w-40",children:e.jsx("div",{className:"text-sm text-gray-500",children:b.date(s.created_at)})}),e.jsx(a,{className:"w-32",children:e.jsxs(P,{children:[e.jsx(v,{onClick:()=>o(`${m.REPAIR_ISSUE_SLIP.CREATE}?editId=${s.id}`)}),e.jsx(R,{refetch:p,endpoint:h.repair_issue_slip.delete(s.id)})]})})]},s.id))})]}),t.length>0&&j()]})})};export{B as default};
