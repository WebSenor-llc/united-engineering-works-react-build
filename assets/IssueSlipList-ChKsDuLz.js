import{j as e,u as I,r as u,a as R,A as p,h as g,e as b,y as x}from"./index-BSu8tAiZ.js";import{L as N}from"./ListWrapper-UGCs2EGJ.js";import{T as P,a as A,b as d}from"./TableWrapper-B1xaUZht.js";import{T as E}from"./TableRow-CXVjsK1A.js";import{u as D}from"./usePagination-DTR4IfGH.js";import{T as _,a as B}from"./TableDelete-DRG1O2DM.js";import{T as L}from"./TableEdit-Cs8oLfz4.js";import{D as z,P as W,S as F,V as s,I as U,T as l,a as v,p as k}from"./react-pdf.browser-DXif42_8.js";const q=({data:o})=>e.jsx(z,{children:e.jsxs(W,{size:"A4",style:t.page,children:[e.jsxs(s,{style:t.headerContainer,children:[e.jsx(s,{style:t.logoSection,children:e.jsx(U,{src:"/assets/images/logo.png",style:t.logo})}),e.jsxs(s,{style:t.companyInfo,children:[e.jsx(l,{style:t.companyName,children:"UNITED ENGINEERING WORKS"}),e.jsx(l,{style:t.companyAddress,children:"Neha Village, NH-08, Udai Pur, 313001"}),e.jsx(l,{style:t.companyContact,children:"Phone: 9829232445 | GSTIN: 08ABCPK8948J2P"})]})]}),e.jsx(l,{style:t.title,children:"ISSUE SLIP"}),e.jsxs(s,{style:t.infoContainer,children:[e.jsxs(s,{style:t.detailRow,children:[e.jsx(l,{style:t.label,children:"MR:"}),e.jsx(l,{style:t.value,children:o.mr})]}),e.jsxs(s,{style:t.detailRow,children:[e.jsx(l,{style:t.label,children:"Machine:"}),e.jsx(l,{style:t.value,children:o.machine})]}),e.jsxs(s,{style:t.detailRow,children:[e.jsx(l,{style:t.label,children:"For Party:"}),e.jsx(l,{style:t.value,children:o.for_party})]}),e.jsxs(s,{style:t.detailRow,children:[e.jsx(l,{style:t.label,children:"For Mines:"}),e.jsx(l,{style:t.value,children:o.for_mines})]}),e.jsxs(s,{style:t.detailRow,children:[e.jsx(l,{style:t.label,children:"Purpose:"}),e.jsx(l,{style:t.value,children:o.purpose})]})]}),e.jsxs(s,{style:t.tableContainer,children:[e.jsxs(s,{style:t.tableHeaderRow,children:[e.jsx(s,{style:[t.tableCell,t.snoCol],children:e.jsx(l,{style:t.headerText,children:"S.No"})}),e.jsx(s,{style:[t.tableCell,t.itemNameCol],children:e.jsx(l,{style:t.headerText,children:"Item Name"})}),e.jsx(s,{style:[t.tableCell,t.itemCodeCol],children:e.jsx(l,{style:t.headerText,children:"Item Code"})}),e.jsx(s,{style:[t.tableCell,t.unitCol],children:e.jsx(l,{style:t.headerText,children:"Unit"})}),e.jsx(s,{style:[t.tableCell,t.qtyCol],children:e.jsx(l,{style:t.headerText,children:"Required QTY"})}),e.jsx(s,{style:[t.tableCell,t.qtyCol],children:e.jsx(l,{style:t.headerText,children:"Issued QTY"})})]}),o.items.map((n,h)=>e.jsxs(s,{style:t.tableRow,children:[e.jsx(s,{style:[t.tableCell,t.snoCol],children:e.jsx(l,{style:t.cellText,children:h+1})}),e.jsx(s,{style:[t.tableCell,t.itemNameCol],children:e.jsx(l,{style:t.cellText,children:n.item_name})}),e.jsx(s,{style:[t.tableCell,t.itemCodeCol],children:e.jsx(l,{style:t.cellText,children:n.item_code})}),e.jsx(s,{style:[t.tableCell,t.unitCol],children:e.jsx(l,{style:t.cellText,children:n.item_unit})}),e.jsx(s,{style:[t.tableCell,t.qtyCol],children:e.jsx(l,{style:t.cellText,children:n.required_qty})}),e.jsx(s,{style:[t.tableCell,t.qtyCol],children:e.jsx(l,{style:t.cellText,children:n.issued_qty})})]},h))]}),e.jsx(s,{style:t.signatureContainer,children:e.jsxs(s,{style:t.signatureBox,children:[e.jsx(l,{style:t.signatureTitle,children:"For: UNITED ENGINEERING WORKS"}),e.jsx(s,{style:t.signatureLine}),e.jsx(l,{style:t.signatureText,children:"Authorized Signatory"})]})})]})}),t=F.create({page:{padding:20,fontSize:10,fontFamily:"Helvetica",lineHeight:1.3},headerContainer:{flexDirection:"row",alignItems:"center",marginBottom:15,gap:15,borderBottomWidth:2,borderBottomColor:"#000",paddingBottom:8},logoSection:{width:"20%"},logo:{width:90,height:50},companyInfo:{width:"80%",paddingLeft:10},companyName:{fontSize:14,fontWeight:"bold"},companyAddress:{fontSize:9},companyContact:{fontSize:9},title:{fontSize:16,textAlign:"center",marginVertical:10,fontWeight:"bold",textDecoration:"underline"},infoContainer:{marginBottom:15},detailRow:{flexDirection:"row",marginBottom:3},label:{width:"25%",fontSize:9,fontWeight:"bold"},value:{width:"75%",fontSize:9},tableContainer:{borderWidth:.25,borderColor:"#000",marginBottom:20},tableHeaderRow:{flexDirection:"row",backgroundColor:"#e0e0e0"},tableRow:{flexDirection:"row"},tableCell:{borderWidth:.25,borderColor:"#000",padding:2,justifyContent:"center",alignItems:"center"},headerText:{fontSize:9,fontWeight:"bold",textAlign:"center"},cellText:{fontSize:8,textAlign:"center"},snoCol:{width:"8%"},itemNameCol:{width:"30%"},itemCodeCol:{width:"20%"},unitCol:{width:"12%"},qtyCol:{width:"15%"},signatureContainer:{marginTop:40,alignItems:"flex-end"},signatureBox:{width:200,alignItems:"center"},signatureTitle:{fontSize:10,fontWeight:"bold",marginBottom:25},signatureLine:{width:150,height:1,backgroundColor:"#000",marginBottom:5},signatureText:{fontSize:9}}),Y=()=>{const{renderPagination:o}=D(),n=I(),[h,C]=u.useState([]),{user:y,selectedBranchId:m}=R(),f=i=>{if(!i)return{ymd:"",dmy:""};const[r]=i.split("T"),[a,c,S]=r.split("-");return{ymd:r,dmy:`${S}-${c}-${a}`}},j=async()=>{try{const i=m||y?.branch_id,r=await g.get(b.issue_slips.items,{params:i?{branch_id:i}:{}}),a=r.data?.data?.slips||r.data?.slips||[];C(a)}catch(i){console.error("Failed to fetch issue slips",i)}};u.useEffect(()=>{j()},[m,y]);const T=async i=>{try{const r=await k(e.jsx(q,{data:i})).toBlob(),a=URL.createObjectURL(r),c=document.createElement("a");c.href=a,c.download=`issue-slip-${i.id||"unknown"}.pdf`,c.click(),URL.revokeObjectURL(a)}catch(r){console.error("Failed to download issue slip",r),x.error("Failed to download issue slip")}},w=async i=>{try{await g.delete(b.issue_slips.delete(i)),x.success("Issue slip deleted successfully"),j()}catch(r){console.error("Failed to delete issue slip",r),x.error("Failed to delete issue slip")}};return e.jsxs(N,{title:"Issue Slip List",createOnClick:()=>n(p.ISSUE_SLIP.CREATE),children:[e.jsxs(P,{children:[e.jsx(A,{cols:[{title:"Date"},{title:"Issued to MR"},{title:"For Machine"},{title:"For Party"},{title:"Purpose"},{title:"Actions"}]}),e.jsx("tbody",{children:h.map((i,r)=>e.jsxs(E,{children:[e.jsx(d,{children:r+1}),e.jsx(d,{children:f(i.created_at).dmy}),e.jsx(d,{children:i?.mr||"N/A"}),e.jsx(d,{children:i.for_mines||"N/A"}),e.jsx(d,{children:i.for_party||"N/A"}),e.jsx(d,{children:i.purpose||"N/A"}),e.jsxs(_,{children:[e.jsx(v,{title:"Download Issue slip",onClick:()=>T(i)}),e.jsx(L,{onClick:()=>n(`${p.ISSUE_SLIP.CREATE}?editId=${i.id}`)}),e.jsx(B,{onClick:()=>w(Number(i.id))})]})]},i.id))})]}),o()]})};export{Y as default};
