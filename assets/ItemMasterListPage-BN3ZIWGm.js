import{r as s,u as P,j as e,P as p,A as h,e as x,h as S}from"./index-DTUaUizH.js";import{L as A}from"./ListWrapper-Dr0Tmx23.js";import{T as I}from"./TableActions-uzQqphGO.js";import{T as v,a as y,b as r}from"./TableWrapper-C013oIpb.js";import{T as C}from"./TableDelete-CG-AnBcY.js";import{T as L}from"./TableEdit-Dl5xSLkh.js";import{T as M}from"./TableRow-Brhg8sk2.js";import{u as N}from"./usePagination-D2O7U4IL.js";import{L as R}from"./Loading-C80BVErt.js";import{T as k}from"./TextInput-DjvRLXTc.js";const F=()=>{const{page:o,rowsPerPage:n,setTotal:u,renderPagination:T}=N(),[f,j]=s.useState([]),[g,m]=s.useState(!1),[a,_]=s.useState(""),[c,b]=s.useState(""),l=P();s.useEffect(()=>{const t=setTimeout(()=>{(a.length>=3||a==="")&&b(a)},300);return()=>clearTimeout(t)},[a]);const d=async()=>{m(!0);try{const t=await S.get(x.item_master.items,{params:{page:o+1,rowsPerPage:n,item_name:c||void 0}}),{items:i,pagination:E}=t.data;j(i),u(E.total)}catch(t){console.log(t)}finally{m(!1)}};return s.useEffect(()=>{d()},[o,n,c]),e.jsxs(A,{title:"Item Master",createOnClick:p.hasPermission("master_data_create_items")?()=>l(h.ITEM_MASTER.CREATE):void 0,children:[e.jsx("div",{className:"mb-4 mt-4 px-4 md:px-0",children:e.jsx(k,{placeholder:"Search by item name...",value:a,onChange:t=>_(t.target.value),className:"max-w-md"})}),g?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(R,{})}):e.jsxs(v,{children:[e.jsx(y,{cols:[{title:"Item Name"},{title:"Item Code"},{title:"Opening Stock"},{title:"Actions"}]}),e.jsx("tbody",{children:f.map((t,i)=>e.jsxs(M,{children:[e.jsx(r,{className:"px-5",children:o*n+i+1}),e.jsx(r,{children:t.item_name}),e.jsx(r,{children:t.item_code}),e.jsx(r,{children:t.current_stock}),p.hasPermission("master_data_update_masters")&&e.jsx(r,{children:e.jsxs(I,{children:[e.jsx(L,{onClick:()=>l(`${h.ITEM_MASTER.CREATE}?editId=${t.id}`)}),e.jsx(C,{refetch:d,endpoint:x.item_master.delete(t?.id)})]})})]},i))})]}),T()]})};export{F as default};
