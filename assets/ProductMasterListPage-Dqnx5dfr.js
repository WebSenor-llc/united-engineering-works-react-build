import{a as g,r as o,u as _,j as e,P as p,A as u,e as m,h as A}from"./index-DHxjsmS_.js";import{L as b}from"./ListWrapper-Cc4XzfgT.js";import{T as E,a as R}from"./TableDelete-CBS2zXrt.js";import{T as y,a as C,b as s}from"./TableWrapper-Cc34JFCi.js";import{T as L}from"./TableEdit-DAgKBokJ.js";import{T as S}from"./TableRow-CUJFv1cP.js";import{u as v}from"./usePagination-CsbUaw-r.js";import{L as D}from"./Loading-CxrkmpiL.js";const I=()=>{const{page:i,rowsPerPage:n,setTotal:h,renderPagination:T}=v(),{selectedBranchId:r}=g(),[j,x]=o.useState([]),[P,l]=o.useState(!1),c=_(),d=async()=>{l(!0);try{const t=await A.get(m.product_master.products,{params:{page:i+1,per_page:n,...r&&{branch_id:r}}});console.log("object",t.data);const{products:a,pagination:f}=t.data;x(a),h(f.total)}catch(t){console.log(t)}finally{l(!1)}};return o.useEffect(()=>{d()},[i,n,r]),e.jsxs(b,{title:"Product Master",createOnClick:p.hasPermission("master_data_create_products")?()=>c(u.PRODUCT_MASTER.CREATE):void 0,children:[P?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(D,{})}):e.jsxs(y,{children:[e.jsx(C,{cols:[{title:"Product Name"},{title:"Source"},{title:"Quantity Required"},{title:"Alloted To"},{title:"Actions"}]}),e.jsx("tbody",{children:j.map((t,a)=>e.jsxs(S,{children:[e.jsx(s,{children:a+1}),e.jsx(s,{children:t.name}),e.jsx(s,{children:t.source}),e.jsx(s,{children:t.quantity_required}),e.jsx(s,{children:t?.allocated_supervisor?.full_name||"-"}),p.hasPermission("master_data_update_products")&&e.jsxs(E,{children:[e.jsx(L,{onClick:()=>c(`${u.PRODUCT_MASTER.CREATE}?editId=${t.id}`)}),e.jsx(R,{refetch:d,endpoint:m.product_master.delete(t?.id)})]})]},a))})]}),T()]})};export{I as default};
