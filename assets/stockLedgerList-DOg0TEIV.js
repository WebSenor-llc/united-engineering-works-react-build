import{r,a as b,j as t,h as S,e as N}from"./index-DZtYjDQU.js";import{L as v}from"./ListWrapper-CNaChj3E.js";import{T as a}from"./TableData-BjMpP-xJ.js";import{T as A,a as D}from"./TableWrapper-CtuUeaqn.js";import{T as L}from"./TableRow-BD2yREqM.js";import{u as q}from"./usePagination-Bh_zqpNU.js";import{T as w}from"./TextInput-BFCx8Xor.js";const W=()=>{const{page:n,rowsPerPage:c,setTotal:m,renderPagination:p}=q(),[h,u]=r.useState([]),{user:x,selectedBranchId:o}=b(),[d,y]=r.useState(""),[l,j]=r.useState(""),f=e=>{if(!e)return{ymd:"",dmy:""};const[s]=e.split("T"),[i,T,_]=s.split("-");return{ymd:s,dmy:`${_}-${T}-${i}`}};r.useEffect(()=>{const e=setTimeout(()=>{j(d)},300);return()=>clearTimeout(e)},[d]);const g=async()=>{try{const e=await S.get(N.stock_ledger.items,{params:{page:n+1,per_page:c,...o&&{branch_id:o},...l&&{search:l}}}),s=e.data?.items??[],i=e.data?.pagination;u(s),i?.last_page!==void 0&&m(i.last_page)}catch(e){console.error("Failed to fetch stock ledger",e)}};return r.useEffect(()=>{g()},[n,c,o,x,l]),t.jsxs(v,{title:"Stock Ledger List",children:[t.jsx("div",{className:"mb-4 mt-4",children:t.jsx(w,{placeholder:"Search by item name...",value:d,onChange:e=>y(e.target.value),className:"max-w-md"})}),t.jsxs(A,{children:[t.jsx(D,{cols:[{title:"Date"},{title:"Item Name"},{title:"Item Description"},{title:"Received Qty"},{title:"Issued Qty"},{title:"Deposited Qty"},{title:"Balance Qty"},{title:"Rejected Qty"}]}),t.jsx("tbody",{children:h.map((e,s)=>t.jsxs(L,{children:[t.jsx(a,{className:"px-5 w-max",children:n*c+s+1}),t.jsx(a,{children:f(e.created_at).dmy}),t.jsx(a,{children:e?.item_name||"N/A"}),t.jsx(a,{children:e?.description||"N/A"}),t.jsx(a,{children:e?.received_quantity||"N/A"}),t.jsx(a,{children:e?.issued_quantity||"N/A"}),t.jsx(a,{children:e?.deposited_quantity||"N/A"}),t.jsx(a,{children:e?.balance_quantity||"0"}),t.jsx(a,{children:e?.rejected_quantity||"0"})]},e.id))})]}),p()]})};export{W as default};
