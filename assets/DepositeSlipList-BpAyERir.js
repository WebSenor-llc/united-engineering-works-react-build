import{u as g,r as m,a as _,j as t,A as h,h as T,e as f,y as u}from"./index-pN5-d-m8.js";import{L as S}from"./ListWrapper-CqihWRKm.js";import{T as A,a as I,b as i}from"./TableWrapper-CZQA7s35.js";import{T as C}from"./TableRow-BiiWmwvS.js";import{u as L}from"./usePagination-C2sJmyrq.js";import{T as $}from"./TableActions-DGk_iS9Q.js";import{T as v}from"./TableEdit-DklRpmAs.js";import{T as w}from"./TableDelete-WFkQ4OjU.js";const q=()=>{const{page:r,rowsPerPage:l,setTotal:x,renderPagination:y}=L(),d=g(),[j,b]=m.useState([]),{user:c,selectedBranchId:n}=_(),D=e=>{if(!e)return{ymd:"",dmy:""};const[s]=e.split("T"),[o,a,E]=s.split("-");return{ymd:s,dmy:`${E}-${a}-${o}`}},p=async()=>{try{const e=n||c?.branch_id,s=await T.get(f.deposit_slip.items,{params:{page:r+1,rowsPerPage:l,...e&&{branch_id:e}}}),o=s.data?.data?.slips||s.data?.slips||[],a=s.data?.pagination;b(o),a?.total!==void 0&&x(a.total)}catch(e){console.error("Failed to fetch deposit slips",e)}};m.useEffect(()=>{p()},[r,l,n,c]);const P=async e=>{try{await T.delete(f.deposit_slip.delete(e)),u.success("Deposit slip deleted successfully"),p()}catch(s){console.error("Failed to delete deposit slip",s),u.error("Failed to delete deposit slip")}};return t.jsxs(S,{title:"Deposite Slip",createOnClick:()=>d(h.DEPOSITE_SLIP.CREATE),children:[t.jsxs(A,{children:[t.jsx(I,{cols:[{title:"Date"},{title:"Deposited From"},{title:"Deposited To"},{title:"Actions"}]}),t.jsx("tbody",{children:j.map((e,s)=>t.jsxs(C,{children:[t.jsx(i,{className:"px-5",children:s+1}),t.jsx(i,{children:D(e.created_at).dmy}),t.jsx(i,{children:e?.depositor?.full_name}),t.jsx(i,{children:e.recieved_by}),t.jsxs($,{children:[t.jsx(v,{onClick:()=>d(`${h.DEPOSITE_SLIP.CREATE}?editId=${e.id}`)}),t.jsx(w,{onClick:()=>P(e.id)})]})]},e.id))})]}),y()]})};export{q as default};
