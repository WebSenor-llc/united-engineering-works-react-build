import{r as a,j as l,h as x,e as j}from"./index-DSLs68fz.js";import{C}from"./index.esm-51NyA9dG.js";import{S as _}from"./SearchableSelect-CnFBwF4i.js";const E=({control:m,name:d,error:f,disabled:h=!1,onChange:p})=>{const[r,u]=a.useState([]),[n,c]=a.useState(!1),[s,S]=a.useState("");a.useEffect(()=>{if(s&&s.length<3)return;(async()=>{c(!0);try{const o=((await x.get(j.item_master.all,{params:{search:s}})).data?.items||[]).filter(g=>g.is_active);u(o)}catch(t){console.error("Failed to fetch items",t)}finally{c(!1)}})()},[s]);const I=r.map(e=>({value:e.id,label:`${e.item_name} (${e.item_code})`}));return l.jsx(C,{name:d,control:m,render:({field:e})=>l.jsx(_,{options:I,value:e.value,disabled:h||n,error:f,placeholder:n?"Loading...":"Select Item",onChange:t=>{const i=r.find(o=>o.id===t);e.onChange(t),p?.(t,i)},onSearch:S})})};export{E as I};
