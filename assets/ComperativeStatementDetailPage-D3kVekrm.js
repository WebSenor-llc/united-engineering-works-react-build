import{g as h,u as p,r as c,h as _,e as j,y as N,A as d,j as e,B as i,D as u}from"./index-Cq0y9b1s.js";import{L as b}from"./Loading-BKbT3m1q.js";const y=()=>{const{id:l}=h(),r=p(),[m,x]=c.useState(!0),[a,o]=c.useState(null);c.useEffect(()=>{l&&g()},[l]);const g=async()=>{x(!0);try{const s=await _.get(j.comparative_statement.details(Number(l))),n=s.data?.statement||s.data;o(n)}catch(s){console.error("Error fetching statement details:",s),N.error(s.response?.data?.message||"Failed to load comparative statement details"),r(d.COMPERATIVE_STATEMENT.LIST)}finally{x(!1)}};return m?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(b,{})}):a?e.jsx("div",{className:"w-full min-h-screen bg-gray-50 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Comparative Statement Details"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"View comparative statement information and vendor comparisons"})]}),e.jsx(i,{variant:"outline",onClick:()=>r(d.COMPERATIVE_STATEMENT.LIST),children:"Back to List"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Statement Number"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:a.statement_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Material Request"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:a.material_requisition?.mr_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Branch"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:a.branch?.branch_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Department"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:a.material_requisition?.department||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 capitalize",children:a.status})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Created Date"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:u.date(a.created_at)})]})]})]}),e.jsx("div",{className:"space-y-6",children:a.items.map((s,n)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("div",{className:"border-b pb-4 mb-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Item #",n+1,": ",s.item?.item_name]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Code: ",s.item?.item_code," | Unit: ",s.item?.unit?.unit_name]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Quantity"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[s.quantity," ",s.item?.unit?.unit_symbol]})]})]})}),s.selected_vendor_rate_details&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-500 text-white",children:"Selected Vendor"}),e.jsx("h4",{className:"text-sm font-semibold text-green-900",children:s.selected_vendor_rate_details.vendor_name})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700",children:"Rate"}),e.jsxs("p",{className:"text-sm font-semibold text-green-900",children:["₹",s.selected_vendor_rate_details.rate||0]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700",children:"Discount"}),e.jsxs("p",{className:"text-sm font-semibold text-green-900",children:[s.selected_vendor_rate_details.discount_percentage||0,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700",children:"Rate After Discount"}),e.jsxs("p",{className:"text-sm font-semibold text-green-900",children:["₹",s.selected_vendor_rate_details.net_amount||0]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700",children:"Item GST"}),e.jsxs("p",{className:"text-sm font-semibold text-green-900",children:[s.selected_vendor_rate_details.gst_percentage||0,"%"]})]})]}),(s.selected_vendor_rate_details.loading_charges||s.selected_vendor_rate_details.freight_charges||s.selected_vendor_rate_details.cutting_charges)&&e.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-3 pt-3 border-t border-green-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700",children:"Loading"}),e.jsxs("p",{className:"text-sm font-semibold text-green-900",children:["₹",s.selected_vendor_rate_details.loading_charges||0,s.selected_vendor_rate_details.loading_gst_percentage?e.jsxs("span",{className:"text-[10px] text-green-600",children:[" (+",s.selected_vendor_rate_details.loading_gst_percentage,"%)"]}):null]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700",children:"Freight"}),e.jsxs("p",{className:"text-sm font-semibold text-green-900",children:["₹",s.selected_vendor_rate_details.freight_charges||0,s.selected_vendor_rate_details.freight_gst_percentage?e.jsxs("span",{className:"text-[10px] text-green-600",children:[" (+",s.selected_vendor_rate_details.freight_gst_percentage,"%)"]}):null]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700",children:"Cutting"}),e.jsxs("p",{className:"text-sm font-semibold text-green-900",children:["₹",s.selected_vendor_rate_details.cutting_charges||0,s.selected_vendor_rate_details.cutting_gst_percentage?e.jsxs("span",{className:"text-[10px] text-green-600",children:[" (+",s.selected_vendor_rate_details.cutting_gst_percentage,"%)"]}):null]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700",children:"Total Amount"}),e.jsxs("p",{className:"text-sm font-semibold text-green-900",children:["₹",s.selected_vendor_rate_details.total_amount||0]})]})]}),s.selected_vendor_rate_details.vendor_remarks&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-green-200",children:[e.jsx("p",{className:"text-xs text-green-700",children:"Remarks:"}),e.jsx("p",{className:"text-xs text-green-800",children:s.selected_vendor_rate_details.vendor_remarks})]})]}),s.all_vendors&&s.all_vendors.length>0?e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Vendor Comparisons (",s.all_vendors.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.all_vendors.map(t=>e.jsxs("div",{className:`border rounded-lg p-4 ${t.is_selected?"border-green-500 bg-green-50":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:`text-sm font-semibold ${t.is_selected?"text-green-900":"text-gray-900"}`,children:t.vendor_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Code: ",t.vendor_code]})]}),t.is_selected&&e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-500 text-white",children:"Selected"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[e.jsx("p",{className:"text-gray-500",children:"Rate"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:["₹",t.rate]})]}),e.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[e.jsx("p",{className:"text-gray-500",children:"Discount"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[t.discount_percentage,"%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[e.jsx("p",{className:"text-gray-500",children:"GST"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[t.gst_percentage,"%"]})]}),e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("p",{className:"text-blue-700",children:"Rate After Disc (Unit)"}),e.jsxs("p",{className:"font-semibold text-blue-900",children:["₹",t.net_amount]})]}),(t.freight_charges||t.loading_charges||t.cutting_charges)&&e.jsxs("div",{className:"col-span-2 grid grid-cols-3 gap-2 mt-1 pt-2",children:[t.loading_charges?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500",children:"Loading"}),e.jsxs("p",{className:"font-semibold text-gray-900 text-xs",children:["₹",t.loading_charges]})]}):null,t.freight_charges?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500",children:"Freight"}),e.jsxs("p",{className:"font-semibold text-gray-900 text-xs",children:["₹",t.freight_charges,t.freight_gst_percentage?e.jsxs("span",{className:"text-[9px] text-gray-500",children:[" (+",t.freight_gst_percentage,"%)"]}):null]})]}):null,t.cutting_charges?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-500",children:"Cutting"}),e.jsxs("p",{className:"font-semibold text-gray-900 text-xs",children:["₹",t.cutting_charges]})]}):null]}),e.jsx("div",{className:"bg-gray-50 p-2 rounded col-span-2",children:e.jsxs("p",{className:"text-blue-700",children:["Total Amount :  ₹ ",t.total_amount]})})]}),t.vendor_remarks&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Remarks:"}),e.jsx("p",{className:"text-xs text-gray-700",children:t.vendor_remarks})]})]},t.vendor_id))})]}):e.jsx("div",{className:"text-center py-8 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"No vendor comparisons available for this item"})})]},s.id))}),e.jsxs("div",{className:"flex justify-end gap-3 pb-6",children:[e.jsx(i,{variant:"outline",onClick:()=>r(d.COMPERATIVE_STATEMENT.LIST),children:"Back to List"}),e.jsx(i,{className:"bg-blue-600 text-white",onClick:()=>r(`${d.COMPERATIVE_STATEMENT.CREATE}?editId=${l}`),children:"Edit Statement"})]})]})}):e.jsx("div",{className:"flex justify-center py-20",children:e.jsx("p",{className:"text-gray-500",children:"Comparative statement not found"})})};export{y as default};
