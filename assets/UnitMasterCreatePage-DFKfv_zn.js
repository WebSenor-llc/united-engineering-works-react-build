import{u as S,b as U,r as i,j as e,B as g,A as x,h as n,e as l,y as o}from"./index-B2jzE3KR.js";import{T as h}from"./TextInput-p-2I97j_.js";import{F as C}from"./FormHeader-CvYIKOo9.js";import{L as w}from"./Loading-CTHClYOp.js";import{o as T,u as I}from"./yup-D5GEy2Wx.js";import{u as A,C as u}from"./index.esm-BJtmoOhw.js";import"./BackButton-CJLAZn-I.js";const F={unit_name:"",unit_symbol:"",is_active:!0},H=()=>{const c=S(),[b]=U(),s=b.get("id"),[j,d]=i.useState(!1),[m,p]=i.useState(!1),{control:r,handleSubmit:v,reset:y,formState:{errors:f}}=A({defaultValues:F,resolver:T(I)}),_=async()=>{if(s){d(!0);try{const a=(await n.get(l.unit_master.details(Number(s)))).data.unit;y({unit_name:a.unit_symbol||"",unit_symbol:a.unit_symbol||"",is_active:a.is_active??!0})}catch(t){console.error("Failed to load unit details:",t),o.error("Failed to load unit details")}finally{d(!1)}}};i.useEffect(()=>{s&&_()},[s]);const N=async t=>{p(!0);try{const a=s?l.unit_master.update(Number(s)):l.unit_master.create;await(s?n.put:n.post)(a,t),o.success(s?"Unit Updated Successfully":"Unit Created Successfully"),c(x.UNIT_MASTER.LIST)}catch(a){console.error(a),o.error(a.response?.data?.message||"Failed to save unit")}finally{p(!1)}};return j?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(w,{})}):e.jsxs("div",{className:"w-full h-full overflow-auto space-y-8 p-4 pb-20",children:[e.jsx("div",{className:"space-y-1 ml-2",children:e.jsx(C,{title:s?"Edit Unit Master":"Create Unit Master",subtitle:s?"Update the unit master details":"Fill out the form to create a new unit master"})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mx-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(u,{name:"unit_name",control:r,render:({field:t})=>e.jsx(h,{required:!0,...t,label:"Unit Name",error:f?.unit_name?.message})}),e.jsx(u,{name:"unit_symbol",control:r,render:({field:t})=>e.jsx(h,{required:!0,...t,label:"Unit Symbol",error:f?.unit_symbol?.message})}),e.jsx(u,{name:"is_active",control:r,render:({field:t})=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Is Active ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...t,value:t.value?"true":"false",onChange:a=>t.onChange(a.target.value==="true"),className:"w-full border border-gray-300 rounded-lg px-3 py-3 bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[e.jsx(g,{onClick:()=>c(x.UNIT_MASTER.LIST),variant:"outline",children:"Cancel"}),e.jsx(g,{onClick:v(N),loading:m,disabled:m,className:"bg-red-600 text-white",children:s?"Update Unit":"Create Unit"})]})]})]})};export{H as default};
