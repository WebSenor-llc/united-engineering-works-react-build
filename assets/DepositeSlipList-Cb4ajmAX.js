import{u as g,r as p,a as _,j as t,A,h as m,e as h,y as u}from"./index-DQLLPGln.js";import{L as E}from"./ListWrapper-BG9lLSAN.js";import{T as S,a as v,b as a}from"./TableWrapper-dhiQGSew.js";import{T as w}from"./TableRow-BJ6MC2zs.js";import{u as F}from"./usePagination-BbkvL3z1.js";import{T as I}from"./TableActions-BtqL2JIQ.js";import{T as L}from"./TableDelete-DNYHMsVC.js";const W=()=>{const{page:o,rowsPerPage:l,setTotal:f,renderPagination:x}=F(),T=g(),[y,j]=p.useState([]),{user:c,selectedBranchId:d}=_(),b=e=>{if(!e)return{ymd:"",dmy:""};const[s]=e.split("T"),[i,r,P]=s.split("-");return{ymd:s,dmy:`${P}-${r}-${i}`}},n=async()=>{try{const e=d||c?.branch_id,s=await m.get(h.deposit_slip.items,{params:{page:o+1,rowsPerPage:l,...e&&{branch_id:e}}}),i=s.data?.data?.slips||s.data?.slips||[],r=s.data?.pagination;j(i),r?.total!==void 0&&f(r.total)}catch(e){console.error("Failed to fetch deposit slips",e)}};p.useEffect(()=>{n()},[o,l,d,c]);const D=async e=>{try{await m.delete(h.deposit_slip.delete(e)),u.success("Deposit slip deleted successfully"),n()}catch(s){console.error("Failed to delete deposit slip",s),u.error("Failed to delete deposit slip")}};return t.jsxs(E,{title:"Deposite Slip",createOnClick:()=>T(A.DEPOSITE_SLIP.CREATE),children:[t.jsxs(S,{children:[t.jsx(v,{cols:[{title:"Date"},{title:"Deposited From"},{title:"Deposited To"},{title:"Actions"}]}),t.jsx("tbody",{children:y.map((e,s)=>t.jsxs(w,{children:[t.jsx(a,{className:"px-5",children:s+1}),t.jsx(a,{children:b(e.created_at).dmy}),t.jsx(a,{children:e?.depositor?.full_name}),t.jsx(a,{children:e.recieved_by}),t.jsx(a,{children:t.jsx(I,{children:t.jsx(L,{onClick:()=>D(e.id)})})})]},e.id))})]}),x()]})};export{W as default};
