import{u as g,r as m,a as _,j as t,A as h,h as T,e as f,y as u}from"./index-gVZAAP-J.js";import{L as S}from"./ListWrapper-CDXR4yYu.js";import{T as A,a as I,b as a}from"./TableWrapper-D8zDqKY_.js";import{T as C}from"./TableRow-D4vG6bsd.js";import{u as L}from"./usePagination-Jfc51W3i.js";import{T as $}from"./TableActions-CBCEPdci.js";import{T as v}from"./TableEdit-59jRdv9L.js";import{T as w}from"./TableDelete-Cqy9W1lx.js";const q=()=>{const{page:r,rowsPerPage:l,setTotal:x,renderPagination:j}=L(),d=g(),[y,b]=m.useState([]),{user:c,selectedBranchId:n}=_(),D=e=>{if(!e)return{ymd:"",dmy:""};const[s]=e.split("T"),[o,i,E]=s.split("-");return{ymd:s,dmy:`${E}-${i}-${o}`}},p=async()=>{try{const e=n||c?.branch_id,s=await T.get(f.deposit_slip.items,{params:{page:r+1,rowsPerPage:l,...e&&{branch_id:e}}}),o=s.data?.data?.slips||s.data?.slips||[],i=s.data?.pagination;b(o),i?.total!==void 0&&x(i.total)}catch(e){console.error("Failed to fetch deposit slips",e)}};m.useEffect(()=>{p()},[r,l,n,c]);const P=async e=>{try{await T.delete(f.deposit_slip.delete(e)),u.success("Deposit slip deleted successfully"),p()}catch(s){console.error("Failed to delete deposit slip",s),u.error("Failed to delete deposit slip")}};return t.jsxs(S,{title:"Deposite Slip",createOnClick:()=>d(h.DEPOSITE_SLIP.CREATE),children:[t.jsxs(A,{children:[t.jsx(I,{cols:[{title:"Date"},{title:"Deposited From"},{title:"Deposited To"},{title:"Actions"}]}),t.jsx("tbody",{children:y.map((e,s)=>t.jsxs(C,{children:[t.jsx(a,{className:"px-5",children:s+1}),t.jsx(a,{children:D(e.created_at).dmy}),t.jsx(a,{children:e?.depositor?.full_name}),t.jsx(a,{children:e.recieved_by}),t.jsx(a,{children:t.jsxs($,{children:[t.jsx(v,{onClick:()=>d(`${h.DEPOSITE_SLIP.CREATE}?editId=${e.id}`)}),t.jsx(w,{onClick:()=>P(e.id)})]})})]},e.id))})]}),j()]})};export{q as default};
