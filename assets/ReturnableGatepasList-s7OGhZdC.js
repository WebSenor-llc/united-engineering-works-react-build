import{u as P,a as E,r,j as e,A as u,h as g,e as h,y as o}from"./index-DSLs68fz.js";import{L as y}from"./ListWrapper-CfuZSALB.js";import{T as A,a as _,b as s}from"./TableWrapper-DIs52MZg.js";import{T as R}from"./TableRow-CIgpbB7e.js";import{u as L}from"./usePagination-BFJhkM5R.js";import{T as N}from"./TableActions-Dv38ne2k.js";import{T as S}from"./TableEdit-xstX_6K6.js";import{T as D}from"./TableDelete-CCBWysz_.js";import{L as G}from"./Loading-C52XRUuf.js";const W=()=>{const{page:l,rowsPerPage:n,setTotal:x,renderPagination:f}=L(),i=P(),{selectedBranchId:c}=E(),[d,j]=r.useState([]),[b,p]=r.useState(!1),m=async()=>{p(!0);try{const t=await g.get(h.returnable_gate_pass.items,{params:{page:l+1,rowsPerPage:n,branch_id:c}}),a=t.data?.pagination;j(t.data.gate_passes||[]),a?.total!==void 0&&x(a.total)}catch(t){console.error("Error fetching gate passes:",t),o.error("Failed to load returnable gate passes")}finally{p(!1)}};r.useEffect(()=>{m()},[l,n,c]);const T=async t=>{try{await g.delete(h.returnable_gate_pass.delete(t)),o.success("Returnable gate pass deleted successfully"),m()}catch(a){console.error("Failed to delete gate pass",a),o.error(a?.response?.data?.message||"Failed to delete returnable gate pass")}};return e.jsxs(y,{title:"Returnable GatePass List",createOnClick:()=>i(u.RETURNABLE_GATEPAS.CREATE),children:[b?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(G,{})}):e.jsxs(A,{children:[e.jsx(_,{cols:[{title:"Date"},{title:"Party Name"},{title:"Purpose"},{title:"Vehicle Number"},{title:"Action"}]}),e.jsx("tbody",{children:d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"No returnable gate passes found"})}):d.map((t,a)=>e.jsxs(R,{children:[e.jsx(s,{className:"px-5",children:a+1}),e.jsx(s,{children:new Date(t.gate_pass_date||t.created_at||"").toLocaleDateString()}),e.jsx(s,{children:t.party_name}),e.jsx(s,{children:t.purpose}),e.jsx(s,{children:t.vehicle_number}),e.jsx(s,{children:e.jsxs(N,{children:[e.jsx(S,{onClick:()=>i(`${u.RETURNABLE_GATEPAS.CREATE}?editId=${t.id}`)}),e.jsx(D,{onClick:()=>T(t.id)})]})})]},t.id))})]}),f()]})};export{W as default};
