import{u as g,r as f,a as _,j as t,A as T,h as p,e as h,y as u}from"./index-pN5-d-m8.js";import{L as P}from"./ListWrapper-CqihWRKm.js";import{T as N,a as D,b as r}from"./TableWrapper-CZQA7s35.js";import{T as F}from"./TableRow-BiiWmwvS.js";import{u as M}from"./usePagination-C2sJmyrq.js";import{T as C}from"./TableActions-DGk_iS9Q.js";import{T as I}from"./TableEdit-DklRpmAs.js";import{T as L}from"./TableDelete-WFkQ4OjU.js";const B=()=>{const{page:o,rowsPerPage:n,setTotal:x,renderPagination:A}=M(),l=g(),[j,y]=f.useState([]),{user:c,selectedBranchId:d}=_(),b=e=>{if(!e)return{ymd:"",dmy:""};const[a]=e.split("T"),[i,s,R]=a.split("-");return{ymd:a,dmy:`${R}-${s}-${i}`}},m=async()=>{try{const e=d||c?.branch_id,a=await p.get(h.material_transfer.items,{params:{page:o+1,rowsPerPage:n,...e&&{branch_id:e}}}),i=a.data?.data?.transfers||a.data?.transfers||[],s=a.data?.pagination;y(i),s?.total!==void 0&&x(s.total)}catch(e){console.error("Failed to fetch material transfers",e)}};f.useEffect(()=>{m()},[o,n,d,c]);const E=async e=>{try{await p.delete(h.material_transfer.delete(e)),u.success("Material transfer deleted successfully"),m()}catch(a){console.error("Failed to delete material transfer",a),u.error("Failed to delete material transfer")}};return t.jsxs(P,{title:"Material Transfer",createOnClick:()=>l(T.MATERIAL_TRANSFER.CREATE),children:[t.jsxs(N,{children:[t.jsx(D,{cols:[{title:"S.No."},{title:"Date"},{title:"Transfer From"},{title:"Transfer To"},{title:"Material Request"},{title:"Actions"}]}),t.jsx("tbody",{children:j.map((e,a)=>t.jsxs(F,{children:[t.jsx(r,{children:a+1}),t.jsx(r,{children:b(e.created_at).dmy}),t.jsx(r,{children:e.transfer_from||"N/A"}),t.jsx(r,{children:e.transfer_to||"N/A"}),t.jsx(r,{children:e?.mr||"N/A"}),t.jsxs(C,{children:[t.jsx(I,{onClick:()=>l(`${T.MATERIAL_TRANSFER.CREATE}?editId=${e.id}`)}),t.jsx(L,{onClick:()=>E(e.id)})]})]},e.id))})]}),A()]})};export{B as default};
