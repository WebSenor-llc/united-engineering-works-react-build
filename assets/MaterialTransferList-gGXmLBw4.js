import{u as g,r as f,a as _,j as t,A as T,h as p,e as h,y as u}from"./index-aHpIp7Ij.js";import{L as P}from"./ListWrapper-CgjY_ujH.js";import{T as D,a as F,b as r}from"./TableWrapper-jv708q_S.js";import{T as M}from"./TableRow-CUivvRdm.js";import{u as N}from"./usePagination-BLResuyG.js";import{T as C}from"./TableActions-D2FqQMqq.js";import{T as I}from"./TableEdit-3ZMvRVs2.js";import{T as L}from"./TableDelete-CQCgin4T.js";const B=()=>{const{page:o,rowsPerPage:n,setTotal:x,renderPagination:A}=N(),l=g(),[j,y]=f.useState([]),{user:c,selectedBranchId:d}=_(),b=e=>{if(!e)return{ymd:"",dmy:""};const[a]=e.split("T"),[i,s,R]=a.split("-");return{ymd:a,dmy:`${R}-${s}-${i}`}},m=async()=>{try{const e=d||c?.branch_id,a=await p.get(h.material_transfer.items,{params:{page:o+1,rowsPerPage:n,...e&&{branch_id:e}}}),i=a.data?.data?.transfers||a.data?.transfers||[],s=a.data?.pagination;y(i),s?.total!==void 0&&x(s.total)}catch(e){console.error("Failed to fetch material transfers",e)}};f.useEffect(()=>{m()},[o,n,d,c]);const E=async e=>{try{await p.delete(h.material_transfer.delete(e)),u.success("Material transfer deleted successfully"),m()}catch(a){console.error("Failed to delete material transfer",a),u.error("Failed to delete material transfer")}};return t.jsxs(P,{title:"Material Transfer",createOnClick:()=>l(T.MATERIAL_TRANSFER.CREATE),children:[t.jsxs(D,{children:[t.jsx(F,{cols:[{title:"Date"},{title:"Transfer From"},{title:"Transfer To"},{title:"Material Request"},{title:"Actions"}]}),t.jsx("tbody",{children:j.map((e,a)=>t.jsxs(M,{children:[t.jsx(r,{children:a+1}),t.jsx(r,{children:b(e.created_at).dmy}),t.jsx(r,{children:e.transfer_from||"N/A"}),t.jsx(r,{children:e.transfer_to||"N/A"}),t.jsx(r,{children:e?.mr||"N/A"}),t.jsx(r,{children:t.jsxs(C,{children:[t.jsx(I,{onClick:()=>l(`${T.MATERIAL_TRANSFER.CREATE}?editId=${e.id}`)}),t.jsx(L,{onClick:()=>E(e.id)})]})})]},e.id))})]}),A()]})};export{B as default};
