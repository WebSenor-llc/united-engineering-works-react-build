import{u as T,r as n,j as e,D as N,A as x,e as m,P as _,h as b}from"./index-BEme_EUt.js";import{L as y}from"./ListWrapper-BEjqc6VH.js";import{T as E,a as P,b as a}from"./TableWrapper-xBC1zAYs.js";import{T as A}from"./TableRow-ZxJSRXVE.js";import{T as S}from"./TableActions-D4JklVjJ.js";import{T as v}from"./TableEdit-DP4qb6e7.js";import{T as R}from"./TableDelete-Bx4Sru7-.js";import{u as w}from"./usePagination-ncXkOQbX.js";const H=()=>{const{page:i,rowsPerPage:l,setTotal:h,renderPagination:u}=w(),o=T(),[t,j]=n.useState([]),[f,c]=n.useState(!0),d=async()=>{c(!0);try{const s={page:i+1,rowsPerPage:l},r=await b.get(m.repair_issue_slip.list,{params:s}),g=r.data?.data||[],p=r.data?.pagination;j(g),p?.total!==void 0&&h(p.total)}catch(s){console.error("Error fetching issue slips:",s)}finally{c(!1)}};return n.useEffect(()=>{d()},[i,l]),e.jsx("div",{className:"space-y-6",children:e.jsxs(y,{title:`Issue Slips (${t.length})`,createOnClick:_.hasPermission("inhouse_repair_create")?()=>o(x.STATE_MASTER.CREATE):void 0,children:[e.jsxs(E,{children:[e.jsx(P,{cols:[{title:"Repair Item"},{title:"To Whom"},{title:"Created Date"},{title:"Actions"}]}),e.jsx("tbody",{children:f&&t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Loading issue slips..."})]})})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"No issue slips found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Issue slips will appear here once created."})]})})}):t.map((s,r)=>e.jsxs(A,{children:[e.jsx(a,{className:"px-5",children:i*l+r+1}),e.jsx(a,{children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.inhouse_deposit_slip?.repair_item||"N/A"})}),e.jsx(a,{children:e.jsx("div",{className:"text-sm text-gray-900",children:s.to_whom_user?.full_name||s.other||"N/A"})}),e.jsx(a,{className:"w-40",children:e.jsx("div",{className:"text-sm text-gray-500",children:N.date(s.created_at)})}),e.jsx(a,{className:"w-32",children:e.jsxs(S,{children:[e.jsx(v,{onClick:()=>o(`${x.REPAIR_ISSUE_SLIP.CREATE}?editId=${s.id}`)}),e.jsx(R,{refetch:d,endpoint:m.repair_issue_slip.delete(s.id)})]})})]},s.id))})]}),t.length>0&&u()]})})};export{H as default};
