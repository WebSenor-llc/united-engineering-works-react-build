import{u as g,r as l,a as j,h as c,e as d,y as r,j as e,A as p,P as T}from"./index-9KeMeSmC.js";import{L as P}from"./ListWrapper-2d9ET8qH.js";import{T as A,a as f,b as t}from"./TableWrapper-Cibv4hJc.js";import{T as m}from"./TableRow-KN3kP3T0.js";import{u as b}from"./usePagination-C2SwPsFT.js";import{T as E,a as S}from"./TableDelete--7gMyMPR.js";import{T as y}from"./TableEdit-DRmZ0vft.js";const F=()=>{const{renderPagination:h}=b(),i=g(),[o,x]=l.useState([]),{selectedBranchId:u}=j();l.useEffect(()=>{n()},[u]);const n=async()=>{try{const s=await c.get(d.visitor_gate_pass.items);console.log("API Response:",s.data),x(s.data.gate_passes||[])}catch(s){console.error("Failed to load visitors",s),r.error("Failed to load visitor gate passes")}},_=async s=>{try{await c.delete(d.visitor_gate_pass.delete(s)),r.success("Visitor gate pass deleted successfully"),n()}catch(a){console.error("Failed to delete visitor gate pass",a),r.error(a?.response?.data?.message||"Failed to delete visitor gate pass")}};return e.jsxs(P,{title:"Visitor GatePass List",createOnClick:T.hasPermission("gate_pass_management_create")?()=>i(p.VISITOR_GATEPASS.CREATE):void 0,children:[e.jsxs(A,{children:[e.jsx(f,{cols:[{title:"Date"},{title:"Name"},{title:"Contact Number"},{title:"Person to Meet"},{title:"Purpose"},{title:"Action"}]}),e.jsx("tbody",{children:o.length===0?e.jsx(m,{children:e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-5 whitespace-nowrap",children:"No Visitor Gate Pass Records Found"})})}):o.map((s,a)=>e.jsxs(m,{children:[e.jsx(t,{children:a+1}),e.jsx(t,{children:new Date(s.gate_pass_date).toLocaleDateString()}),e.jsx(t,{children:s.visitor_name}),e.jsx(t,{children:s.visitor_contact||"N/A"}),e.jsx(t,{children:s.person_to_meet?.full_name||s.person_to_meet?.username||"N/A"}),e.jsx(t,{children:s.purpose}),e.jsxs(E,{children:[e.jsx(y,{onClick:()=>i(`${p.VISITOR_GATEPASS.CREATE}?editId=${s.id}`)}),e.jsx(S,{onClick:()=>_(s.id)})]})]},s.id))})]}),h()]})};export{F as default};
