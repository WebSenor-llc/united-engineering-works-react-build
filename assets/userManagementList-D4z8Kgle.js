import{u as T,r as i,j as e,P as l,A as d,e as p,h as E}from"./index-Cljs0C-M.js";import{L as _}from"./ListWrapper-CKiJTCq-.js";import{T as N,a as A}from"./TableDelete-C2E6Q8LB.js";import{T as P,a as b,b as a}from"./TableWrapper-D0x0lFKt.js";import{T as w}from"./TableEdit-BhFVQjW8.js";import{T as y}from"./TableRow-D3Eqxb8Z.js";import{L as U}from"./Loading-B5F64OcS.js";import{u as L}from"./usePagination-Cd_HJdu7.js";const H=()=>{const o=T(),[u,g]=i.useState([]),[x,m]=i.useState(!1),{page:r,rowsPerPage:n,setTotal:f,renderPagination:h}=L(),c=async()=>{m(!0);try{const s=await E.get(p.user_management.users,{params:{page:r+1,per_page:n}}),{users:t,pagination:j}=s.data;g(t),f(j.total)}catch(s){console.log(s)}finally{m(!1)}};return i.useEffect(()=>{c()},[r,n]),e.jsxs(_,{title:"User Management",createOnClick:l.hasPermission("user_management_create")?()=>o(d.USER_MANAGEMENT.CREATE):void 0,children:[x?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(U,{})}):e.jsxs(P,{children:[e.jsx(b,{cols:[{title:"Full Name"},{title:"username"},{title:"Employee Code"},{title:"Email"},{title:"Actions"}]}),e.jsx("tbody",{children:u.map((s,t)=>e.jsxs(y,{children:[e.jsx(a,{className:"w-12 text-center font-medium",children:r*n+t+1}),e.jsx(a,{className:"w-48",children:s.full_name}),e.jsx(a,{className:"w-36",children:s.username}),e.jsx(a,{className:"w-36",children:s.employee_code}),e.jsx(a,{className:"w-64",children:s.email}),e.jsx(a,{className:"w-20",children:e.jsxs(N,{children:[l.hasPermission("user_management_update")&&e.jsx(w,{onClick:()=>o(`${d.USER_MANAGEMENT.CREATE}?id=${s.id}`)}),l.hasPermission("user_management_delete")&&e.jsx(A,{refetch:c,endpoint:p.user_management.delete(s?.id)})]})})]},t))})]}),h()]})};export{H as default};
