import{l as j,u as g,r as c,j as e,h as p,e as N,y}from"./index-CVLuNvHl.js";import{L as b}from"./Loading-DNOjMSnZ.js";import{B as u}from"./BackButton-OhCUJKaV.js";import{T as f,a as v,b as a}from"./TableWrapper-4tTsxnyx.js";import{T as n}from"./TableRow-JWYm0EGd.js";const D=()=>{const{id:l}=j(),i=g(),[s,m]=c.useState(null),[x,o]=c.useState(!0);c.useEffect(()=>{(async()=>{if(l)try{const r=await p.get(N.material_inspection_report.details(Number(l))),h=r.data?.report||r.data?.data||r.data;m(h)}catch(r){console.error("Failed to fetch Material Inspection Report details:",r),y.error("Failed to load Material Inspection Report details"),i(-1)}finally{o(!1)}})()},[l,i]);const d=t=>t?new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";return x?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(b,{})}):s?e.jsxs("div",{className:"w-full h-full overflow-auto space-y-6 p-4 pb-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Material Inspection Report Details"}),e.jsx("p",{className:"text-sm text-gray-500",children:"View material inspection report information and inspected items"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Inspection Report Information"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Report ID"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["MIR-",s.id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Department From"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.from_department||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Department To"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.to_department||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"GRN Number"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.grn?.grn_number||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"GRN Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d(s.grn?.grn_date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"M/S"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.ms||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Branch"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.branch?.branch_name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Inspection Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d(s.created_at)})]})]})})]}),s.grn?.vendor&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Vendor Information"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Vendor Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.grn.vendor.party_name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Company Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.grn.vendor.company_name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.grn.vendor.phone||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.grn.vendor.email||"-"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Address"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.grn.vendor.address||"-"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Inspected Items"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(f,{children:[e.jsx(v,{cols:[{title:"Item Name"},{title:"Item Code"},{title:"Item Description"},{title:"Unit"},{title:"Received Qty"},{title:"Thick (B/L)"},{title:"Length (B/L)"},{title:"Width (B/L)"},{title:"Thick (Actual)"},{title:"Length (Actual)"},{title:"Width (Actual)"},{title:"Accepted Qty"},{title:"Rejected Qty"},{title:"Reject Reason"}]}),e.jsx("tbody",{children:s.items&&s.items.length>0?s.items.map((t,r)=>e.jsxs(n,{children:[e.jsx(a,{className:"text-center font-medium",children:r+1}),e.jsx(a,{children:t.item?.item_name||"-"}),e.jsx(a,{className:"font-mono text-sm",children:t.item?.item_code||"-"}),e.jsx(a,{className:"text-sm",children:t.item?.item_description||"-"}),e.jsx(a,{className:"text-center",children:t.item?.unit?.unit_name||"-"}),e.jsx(a,{className:"text-center",children:t.quantity||"0"}),e.jsx(a,{className:"text-center",children:t.bill_thick||"0"}),e.jsx(a,{className:"text-center",children:t.bill_length||"0"}),e.jsx(a,{className:"text-center",children:t.bill_width||"0"}),e.jsx(a,{className:"text-center",children:t.actual_req_thick||"0"}),e.jsx(a,{className:"text-center",children:t.actual_req_length||"0"}),e.jsx(a,{className:"text-center",children:t.actual_req_width||"0"}),e.jsx(a,{className:"text-center font-medium text-green-600",children:t.accepted_quantity||"0"}),e.jsx(a,{className:"text-center font-medium text-red-600",children:t.rejected_quantity||"0"}),e.jsx(a,{className:"text-sm",children:t.reject_reason||"-"})]},t.id)):e.jsx(n,{children:e.jsx("td",{colSpan:15,className:"text-center py-8 text-gray-500",children:"No items found"})})})]})})})]}),s.items&&s.items.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Inspection Summary"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.items.reduce((t,r)=>t+(r.quantity||0),0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Received"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.items.reduce((t,r)=>t+(r.accepted_quantity||0),0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Accepted"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.items.reduce((t,r)=>t+(r.rejected_quantity||0),0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Rejected"})]})]})})]})]}):e.jsx("div",{className:"flex justify-center py-20",children:e.jsx("div",{className:"text-gray-500",children:"Material Inspection Report not found"})})};export{D as default};
