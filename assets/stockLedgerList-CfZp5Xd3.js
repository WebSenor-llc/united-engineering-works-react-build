import{r,a as S,j as t,h as N,e as _}from"./index-pN5-d-m8.js";import{L as v}from"./ListWrapper-CqihWRKm.js";import{T as L,a as A,b as a}from"./TableWrapper-CZQA7s35.js";import{T as D}from"./TableRow-BiiWmwvS.js";import{u as P}from"./usePagination-C2sJmyrq.js";import{T as q}from"./TextInput-CDui9bNy.js";const B=()=>{const{page:d,rowsPerPage:l,setTotal:m,renderPagination:h}=P(),[u,p]=r.useState([]),{user:x,selectedBranchId:n}=S(),[c,y]=r.useState(""),[o,f]=r.useState(""),j=e=>{if(!e)return{ymd:"",dmy:""};const[s]=e.split("T"),[i,b,T]=s.split("-");return{ymd:s,dmy:`${T}-${b}-${i}`}};r.useEffect(()=>{const e=setTimeout(()=>{f(c)},300);return()=>clearTimeout(e)},[c]);const g=async()=>{try{const e=await N.get(_.stock_ledger.items,{params:{page:d+1,rowsPerPage:l,...n&&{branch_id:n},...o&&{search:o}}}),s=e.data?.items??[],i=e.data?.pagination;p(s),i?.total!==void 0&&m(i.total)}catch(e){console.error("Failed to fetch stock ledger",e)}};return r.useEffect(()=>{g()},[d,l,n,x,o]),t.jsxs(v,{title:"Stock Ledger List",children:[t.jsx("div",{className:"mb-4 mt-4",children:t.jsx(q,{placeholder:"Search by item name...",value:c,onChange:e=>y(e.target.value),className:"max-w-md"})}),t.jsxs(L,{children:[t.jsx(A,{cols:[{title:"Date"},{title:"Item Name"},{title:"Received Qty"},{title:"Issued Qty"},{title:"Deposited Qty"},{title:"Balance Qty"}]}),t.jsx("tbody",{children:u.map((e,s)=>t.jsxs(D,{children:[t.jsx(a,{className:"px-5",children:s+1}),t.jsx(a,{children:j(e.created_at).dmy}),t.jsx(a,{children:e?.item_name||"N/A"}),t.jsx(a,{children:e?.received_quantity||"N/A"}),t.jsx(a,{children:e?.issued_quantity||"N/A"}),t.jsx(a,{children:e?.deposited_quantity||"N/A"}),t.jsx(a,{children:e?.balance_quantity||"0"})]},e.id))})]}),h()]})};export{B as default};
