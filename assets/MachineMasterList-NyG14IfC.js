import{u as T,a as M,r,j as e,A as h,e as p,P as b,h as A}from"./index-DQLLPGln.js";import{L as E}from"./ListWrapper-BG9lLSAN.js";import{T as _}from"./TableActions-BtqL2JIQ.js";import{T as N,a as P,b as t}from"./TableWrapper-dhiQGSew.js";import{T as S}from"./TableDelete-DNYHMsVC.js";import{T as y}from"./TableEdit-eeWH3hJk.js";import{T as C}from"./TableRow-BJ6MC2zs.js";import{u as L}from"./usePagination-BbkvL3z1.js";import{L as R}from"./Loading-B1xtHlfm.js";import{g as v,f as w}from"./maintenanceUtils-DBVPLXJ6.js";const z=()=>{const i=T(),{page:o,rowsPerPage:c,setTotal:x,renderPagination:u}=L(),{selectedBranchId:n}=M(),[f,j]=r.useState([]),[g,l]=r.useState(!1),d=async()=>{l(!0);try{const a=await A.get(p.machine_master.machines,{params:{page:o+1,rowsPerPage:c,...n&&{branch_id:n}}}),s=a?.data;j(s),x(a.data?.total||s.length)}catch(a){console.log(a)}finally{l(!1)}};return r.useEffect(()=>{d()},[o,c,n]),e.jsxs(E,{title:"Machine Master",createOnClick:b.hasPermission("master_data_create_machine")?()=>i(h.MACHINE_MASTER.CREATE):void 0,children:[g?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(R,{})}):e.jsxs(N,{children:[e.jsx(P,{cols:[{title:"Machine Name"},{title:"Machine Number"},{title:"Status"},{title:"Next Maintenance"},{title:"Maintenance Status"},{title:"Actions"}]}),e.jsx("tbody",{children:f.map((a,s)=>{const m=v(a.maintenance_date);return e.jsxs(C,{children:[e.jsx(t,{className:"px-5",children:s+1}),e.jsx(t,{children:a.name}),e.jsx(t,{children:a.number}),e.jsx(t,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.status==="operational"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.status==="operational"?"Operational":"Breakdown"})}),e.jsx(t,{children:w(a.maintenance_date)}),e.jsx(t,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m.badge}`,children:m.text})}),e.jsx(t,{children:e.jsxs(_,{children:[e.jsx(y,{onClick:()=>i(`${h.MACHINE_MASTER.CREATE}?id=${a?.id}`)}),e.jsx(S,{refetch:d,endpoint:p.machine_master.delete(a?.id)})]})})]},s)})})]}),u()]})};export{z as default};
