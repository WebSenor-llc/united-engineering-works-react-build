import{r as s,u as P,j as e,P as p,A as h,e as u,h as A}from"./index-gVZAAP-J.js";import{L as I}from"./ListWrapper-CDXR4yYu.js";import{T as S}from"./TableActions-CBCEPdci.js";import{T as v,a as y,b as r}from"./TableWrapper-D8zDqKY_.js";import{T as C}from"./TableDelete-Cqy9W1lx.js";import{T as L}from"./TableEdit-59jRdv9L.js";import{T as M}from"./TableRow-D4vG6bsd.js";import{u as N}from"./usePagination-Jfc51W3i.js";import{L as R}from"./Loading-D4JR0vbX.js";import{T as w}from"./TextInput-Dl06c-zo.js";const B=()=>{const{page:o,rowsPerPage:n,setTotal:x,renderPagination:T}=N(),[f,j]=s.useState([]),[g,m]=s.useState(!1),[a,_]=s.useState(""),[c,b]=s.useState(""),l=P();s.useEffect(()=>{const t=setTimeout(()=>{(a.length>=3||a==="")&&b(a)},300);return()=>clearTimeout(t)},[a]);const d=async()=>{m(!0);try{const t=await A.get(u.item_master.items,{params:{page:o+1,rowsPerPage:n,item_name:c||void 0}}),{items:i,pagination:E}=t.data;j(i),x(E.total)}catch(t){console.log(t)}finally{m(!1)}};return s.useEffect(()=>{d()},[o,n,c]),e.jsxs(I,{title:"Item Master",createOnClick:p.hasPermission("master_data_create_items")?()=>l(h.ITEM_MASTER.CREATE):void 0,children:[e.jsx("div",{className:"mb-4 mt-4 px-4 md:px-0",children:e.jsx(w,{placeholder:"Search by item name...",value:a,onChange:t=>_(t.target.value),className:"max-w-md"})}),g?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(R,{})}):e.jsxs(v,{children:[e.jsx(y,{cols:[{title:"Item Name"},{title:"Item Code"},{title:"Quantity"},{title:"Actions"}]}),e.jsx("tbody",{children:f.map((t,i)=>e.jsxs(M,{children:[e.jsx(r,{className:"px-5",children:i+1}),e.jsx(r,{children:t.item_name}),e.jsx(r,{children:t.item_code}),e.jsx(r,{children:t.current_stock}),p.hasPermission("master_data_update_masters")&&e.jsx(r,{children:e.jsxs(S,{children:[e.jsx(L,{onClick:()=>l(`${h.ITEM_MASTER.CREATE}?editId=${t.id}`)}),e.jsx(C,{refetch:d,endpoint:u.item_master.delete(t?.id)})]})})]},i))})]}),T()]})};export{B as default};
