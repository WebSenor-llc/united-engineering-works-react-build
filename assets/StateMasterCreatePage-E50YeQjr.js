import{u as w,b as T,r as n,j as e,B as f,A as g,h as l,e as i,y as d}from"./index-XrqdkMlQ.js";import{T as A}from"./TextInput-CyxRsiph.js";import{T as E}from"./TextArea-gwb_pxTE.js";import{F}from"./FormHeader-BMqyVJC0.js";import{L as I}from"./Loading-De0ina5-.js";import{o as M,b as P}from"./yup-WSW8GMws.js";import{u as L,C as c}from"./index.esm-2ny8XQ-U.js";import"./BackButton-BuSwY49K.js";const k={name:"",country_id:void 0,is_active:!0,note:""},J=()=>{const m=w(),[h]=T(),a=h.get("id"),[j,u]=n.useState(!1),[x,p]=n.useState(!1),[y,b]=n.useState([]),{control:r,handleSubmit:v,reset:S,formState:{errors:o}}=L({defaultValues:k,resolver:M(P)}),N=async()=>{try{const t=await l.get(i.country_master.all),s=t.data.data||t.data||[];b(s)}catch(t){console.error("Failed to fetch countries",t)}},C=async()=>{if(a){u(!0);try{const t=await l.get(i.state_master.details(Number(a))),s=t.data.data||t.data||{};S({name:s.name||"",country_id:s.country_id,is_active:s.is_active??!0,note:s.note||""})}catch(t){console.error("Failed to load state details:",t),d.error("Failed to load state details")}finally{u(!1)}}};n.useEffect(()=>{N(),a&&C()},[a]);const _=async t=>{p(!0);try{const s=a?i.state_master.update(Number(a)):i.state_master.create;await(a?l.put:l.post)(s,t),d.success(a?"State Updated Successfully":"State Created Successfully"),m(g.STATE_MASTER.LIST)}catch(s){console.error(s),d.error(s.response?.data?.message||"Failed to save state")}finally{p(!1)}};return j?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(I,{})}):e.jsxs("div",{className:"w-full h-full overflow-auto space-y-8 p-4 pb-20",children:[e.jsx("div",{className:"space-y-1 ml-2",children:e.jsx(F,{title:a?"Edit State Master":"Create State Master",subtitle:a?"Update the state master details":"Fill out the form to create a new state master"})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mx-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(c,{name:"name",control:r,render:({field:t})=>e.jsx(A,{required:!0,...t,label:"State Name",error:o?.name?.message})}),e.jsx(c,{name:"country_id",control:r,render:({field:t})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 mb-1",children:["Country ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...t,className:"w-full rounded-lg border border-gray-300 mt-1 px-3 py-3 text-gray-700 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"Select Country"}),y.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),o?.country_id?.message&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.country_id.message})]})}),e.jsx(c,{name:"is_active",control:r,render:({field:t})=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Is Active ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...t,value:t.value?"true":"false",onChange:s=>t.onChange(s.target.value==="true"),className:"w-full border border-gray-300 rounded-lg px-3 py-3 bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(c,{name:"note",control:r,render:({field:t})=>e.jsx(E,{...t,label:"Note",placeholder:"Add any additional notes or comments...",error:o?.note?.message,rows:3})})}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[e.jsx(f,{onClick:()=>m(g.STATE_MASTER.LIST),variant:"outline",children:"Cancel"}),e.jsx(f,{onClick:v(_),loading:x,disabled:x,className:"bg-red-600 text-white",children:a?"Update State":"Create State"})]})]})]})};export{J as default};
