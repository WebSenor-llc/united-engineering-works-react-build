import{u as T,r as i,j as e,P as o,A as p,e as d,h as E}from"./index-XrqdkMlQ.js";import{L as _}from"./ListWrapper-n8s5LAbo.js";import{T as N}from"./TableActions-BqxsRnCX.js";import{T as a}from"./TableData-D2335yaW.js";import{T as A}from"./TableDelete-RE0NQPTb.js";import{T as P}from"./TableEdit-sJQZlFPJ.js";import{T as b,a as y}from"./TableWrapper-BfKmYKz6.js";import{T as w}from"./TableRow-DbFK36gc.js";import{L as U}from"./Loading-De0ina5-.js";import{u as L}from"./usePagination-1AUtPZm0.js";const $=()=>{const l=T(),[u,g]=i.useState([]),[f,m]=i.useState(!1),{page:r,rowsPerPage:n,setTotal:x,renderPagination:h}=L(),c=async()=>{m(!0);try{const s=await E.get(d.user_management.users,{params:{page:r+1,per_page:n}}),{users:t,pagination:j}=s.data;g(t),x(j.last_page)}catch(s){console.log(s)}finally{m(!1)}};return i.useEffect(()=>{c()},[r,n]),e.jsxs(_,{title:"User Management",createOnClick:o.hasPermission("user_management_create")?()=>l(p.USER_MANAGEMENT.CREATE):void 0,children:[f?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(U,{})}):e.jsxs(b,{children:[e.jsx(y,{cols:[{title:"Full Name"},{title:"username"},{title:"Employee Code"},{title:"Email"},{title:"Actions"}]}),e.jsx("tbody",{children:u.map((s,t)=>e.jsxs(w,{children:[e.jsx(a,{className:"px-5 font-medium",children:r*n+t+1}),e.jsx(a,{className:"w-48",children:s.full_name}),e.jsx(a,{className:"w-36",children:s.username}),e.jsx(a,{className:"w-36",children:s.employee_code}),e.jsx(a,{className:"",children:s.email}),e.jsx(a,{className:"w-20",children:e.jsxs(N,{children:[o.hasPermission("user_management_update")&&e.jsx(P,{onClick:()=>l(`${p.USER_MANAGEMENT.CREATE}?id=${s.id}`)}),o.hasPermission("user_management_delete")&&e.jsx(A,{refetch:c,endpoint:d.user_management.delete(s?.id)})]})})]},t))})]}),h()]})};export{$ as default};
