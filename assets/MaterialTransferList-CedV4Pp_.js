import{u as g,r as f,a as _,j as t,A as T,h as p,e as h,y as x}from"./index-C-HhpDkY.js";import{L as P}from"./ListWrapper-DOgiLfWA.js";import{T as N,a as D,b as r}from"./TableWrapper-ClISlYEF.js";import{T as F}from"./TableRow-CfaCzneu.js";import{u as M}from"./usePagination-84yGnTMg.js";import{T as C}from"./TableActions-DN0qvBjN.js";import{T as I}from"./TableEdit-dm3GUF_S.js";import{T as L}from"./TableDelete-BioVSJwJ.js";const B=()=>{const{page:i,rowsPerPage:o,setTotal:u,renderPagination:A}=M(),l=g(),[j,y]=f.useState([]),{user:c,selectedBranchId:d}=_(),b=e=>{if(!e)return{ymd:"",dmy:""};const[a]=e.split("T"),[n,s,R]=a.split("-");return{ymd:a,dmy:`${R}-${s}-${n}`}},m=async()=>{try{const e=d||c?.branch_id,a=await p.get(h.material_transfer.items,{params:{page:i+1,rowsPerPage:o,...e&&{branch_id:e}}}),n=a.data?.data?.transfers||a.data?.transfers||[],s=a.data?.pagination;y(n),s?.total!==void 0&&u(s.total)}catch(e){console.error("Failed to fetch material transfers",e)}};f.useEffect(()=>{m()},[i,o,d,c]);const E=async e=>{try{await p.delete(h.material_transfer.delete(e)),x.success("Material transfer deleted successfully"),m()}catch(a){console.error("Failed to delete material transfer",a),x.error("Failed to delete material transfer")}};return t.jsxs(P,{title:"Material Transfer",createOnClick:()=>l(T.MATERIAL_TRANSFER.CREATE),children:[t.jsxs(N,{children:[t.jsx(D,{cols:[{title:"Date"},{title:"Transfer From"},{title:"Transfer To"},{title:"Material Request"},{title:"Actions"}]}),t.jsx("tbody",{children:j.map((e,a)=>t.jsxs(F,{children:[t.jsx(r,{className:"px-5",children:i*o+a+1}),t.jsx(r,{children:b(e.created_at).dmy}),t.jsx(r,{children:e.transfer_from||"N/A"}),t.jsx(r,{children:e.transfer_to||"N/A"}),t.jsx(r,{children:e?.mr||"N/A"}),t.jsx(r,{children:t.jsxs(C,{children:[t.jsx(I,{onClick:()=>l(`${T.MATERIAL_TRANSFER.CREATE}?editId=${e.id}`)}),t.jsx(L,{onClick:()=>E(e.id)})]})})]},e.id))})]}),A()]})};export{B as default};
