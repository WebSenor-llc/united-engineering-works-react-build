const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-pdf.browser-B_aIBO-T.js","assets/index-CGIu5pUp.js","assets/index-Cit8NqMg.css","assets/RepairRequisitionPDF-Dicz-7fh.js"])))=>i.map(i=>d[i]);
import{g as N,u as R,r,j as e,B as v,h as D,e as _,y as u,_ as p}from"./index-CGIu5pUp.js";import{L as w}from"./Loading-vKdaiJgF.js";import{B as q}from"./BackButton-EwyJVBX3.js";const F=()=>{const{id:l}=N(),c=R(),[t,h]=r.useState(null),[f,j]=r.useState(!0),[d,o]=r.useState(!1);r.useEffect(()=>{(async()=>{if(l)try{const m=(await D.get(_.repair_requisition.details(Number(l)))).data;h(m)}catch(a){console.error("Failed to fetch Repair Requisition details:",a),u.error("Failed to load Repair Requisition details"),c(-1)}finally{j(!1)}})()},[l,c]);const g=s=>s?new Date(s).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",y=async()=>{if(t)try{o(!0);const{pdf:s}=await p(async()=>{const{pdf:n}=await import("./react-pdf.browser-B_aIBO-T.js");return{pdf:n}},__vite__mapDeps([0,1,2])),{default:a}=await p(async()=>{const{default:n}=await import("./RepairRequisitionPDF-Dicz-7fh.js");return{default:n}},__vite__mapDeps([3,1,2,0])),b=await s(e.jsx(a,{repairRequisition:t})).toBlob(),x=URL.createObjectURL(b),i=document.createElement("a");i.href=x,i.download=`Repair-Requisition-${t.id}.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(x)}catch(s){console.error("Error generating PDF:",s),u.error("Failed to generate PDF")}finally{o(!1)}};return f?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(w,{})}):t?e.jsxs("div",{className:"w-full h-full overflow-auto space-y-6 p-4 pb-20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Repair Requisition Details"}),e.jsx("p",{className:"text-sm text-gray-500",children:"View repair requisition information and details"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(v,{className:"bg-blue-600 text-white",disabled:d,onClick:y,children:d?"Generating PDF...":"Download PDF"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Repair Requisition Information"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Requisition ID"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["RR-",t.id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Repair Item"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.repair_item||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Department"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.department||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Product"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.product?.name||t.product?.product_name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Machine"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.machine?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Item"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[t.item?.item_name||"-",t.item?.item_code&&e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",t.item.item_code,")"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created By"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[t.creator?.full_name||"-",t.creator?.employee_code&&e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",t.creator?.employee_code,")"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g(t.created_at)})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.description||"-"})]})]})})]})]}):e.jsx("div",{className:"flex justify-center py-20",children:e.jsx("div",{className:"text-gray-500",children:"Repair Requisition not found"})})};export{F as default};
