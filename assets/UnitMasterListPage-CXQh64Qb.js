import{u as _,a as P,r as i,j as s,P as d,A as p,e as u,h as b}from"./index-DhMZcEWH.js";import{L as A}from"./ListWrapper-CgjZDznb.js";import{T as E}from"./TableActions-CbKw7GQR.js";import{T as U,a as y,b as r}from"./TableWrapper-oo68n9a4.js";import{T as N}from"./TableDelete-CFuZEci9.js";import{T as L}from"./TableEdit-BkrWr8oq.js";import{T as R}from"./TableRow-BK-4lt1d.js";import{u as S}from"./usePagination-C5ACwfPp.js";import{L as v}from"./Loading-DarExsNw.js";const B=()=>{const n=_(),{page:o,rowsPerPage:l,setTotal:T,renderPagination:h}=S(),{selectedBranchId:e}=P(),[f,x]=i.useState([]),[g,c]=i.useState(!1),m=async()=>{c(!0);try{const t=await b.get(u.unit_master.units,{params:{page:o+1,rowsPerPage:l,...e&&{branch_id:e}}}),{units:a,pagination:j}=t.data;console.log(a),x(a),T(j.total)}catch(t){console.log(t)}finally{c(!1)}};return i.useEffect(()=>{m()},[o,l,e]),s.jsxs(A,{title:"Unit Master",createOnClick:d.hasPermission("master_data_create_units")?()=>n(p.UNIT_MASTER.CREATE):void 0,children:[g?s.jsx("div",{className:"flex justify-center py-10",children:s.jsx(v,{})}):s.jsxs(U,{children:[s.jsx(y,{cols:[{title:"Unit Name"},{title:"Short Name"},{title:"Actions"}]}),s.jsx("tbody",{children:f.map((t,a)=>s.jsxs(R,{children:[s.jsx(r,{className:"px-5",children:a+1}),s.jsx(r,{children:t.unit_name}),s.jsx(r,{children:t.unit_symbol}),d.hasPermission("master_data_update_masters")&&s.jsxs(E,{children:[s.jsx(L,{onClick:()=>n(`${p.UNIT_MASTER.CREATE}?id=${t?.id}`)}),s.jsx(N,{refetch:m,endpoint:u.unit_master.delete(t?.id)})]})]},a))})]}),h()]})};export{B as default};
