import{u as T,r as i,j as e,P as o,A as d,e as p,h as E}from"./index-C1K7pf_x.js";import{L as N}from"./ListWrapper-Dh0A8ncV.js";import{T as _}from"./TableActions-BXo33jLE.js";import{T as A,a as P,b as a}from"./TableWrapper-DsVaOnkl.js";import{T as b}from"./TableDelete-ByO5Nix7.js";import{T as y}from"./TableEdit-DGR_3UbP.js";import{T as w}from"./TableRow-DCBy3unw.js";import{L as U}from"./Loading-CCwfYO4Q.js";import{u as L}from"./usePagination-C-S8hBPl.js";const W=()=>{const l=T(),[u,g]=i.useState([]),[x,m]=i.useState(!1),{page:r,rowsPerPage:n,setTotal:f,renderPagination:h}=L(),c=async()=>{m(!0);try{const s=await E.get(p.user_management.users,{params:{page:r+1,rowsPerPage:n}}),{users:t,pagination:j}=s.data;g(t),f(j.total)}catch(s){console.log(s)}finally{m(!1)}};return i.useEffect(()=>{c()},[r,n]),e.jsxs(N,{title:"User Management",createOnClick:o.hasPermission("user_management_create")?()=>l(d.USER_MANAGEMENT.CREATE):void 0,children:[x?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(U,{})}):e.jsxs(A,{children:[e.jsx(P,{cols:[{title:"Full Name"},{title:"username"},{title:"Employee Code"},{title:"Email"},{title:"Actions"}]}),e.jsx("tbody",{children:u.map((s,t)=>e.jsxs(w,{children:[e.jsx(a,{className:"px-5 font-medium",children:r*n+t+1}),e.jsx(a,{className:"w-48",children:s.full_name}),e.jsx(a,{className:"w-36",children:s.username}),e.jsx(a,{className:"w-36",children:s.employee_code}),e.jsx(a,{className:"",children:s.email}),e.jsx(a,{className:"w-20",children:e.jsxs(_,{children:[o.hasPermission("user_management_update")&&e.jsx(y,{onClick:()=>l(`${d.USER_MANAGEMENT.CREATE}?id=${s.id}`)}),o.hasPermission("user_management_delete")&&e.jsx(b,{refetch:c,endpoint:p.user_management.delete(s?.id)})]})})]},t))})]}),h()]})};export{W as default};
