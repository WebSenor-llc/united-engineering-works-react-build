import{g as b,u,r as i,j as e,h as p,e as N,y,A as v}from"./index-CGIu5pUp.js";import{L as f}from"./Loading-vKdaiJgF.js";import{B as _}from"./BackButton-EwyJVBX3.js";import{T as w,a as k}from"./TableWrapper-Cjx3wxVY.js";import{T as r}from"./TableData-byLTh03T.js";import{T as m}from"./TableRow-G9XrAhDX.js";const S=()=>{const{id:d}=b(),n=u(),[t,x]=i.useState(null),[o,h]=i.useState(!0);i.useEffect(()=>{(async()=>{if(d)try{const a=await p.get(N.purchase_order.details(Number(d))),j=a.data?.purchaseOrder||a.data?.purchase_order||a.data;x(j)}catch(a){console.error("Failed to fetch Purchase Order details:",a),y.error("Failed to load Purchase Order details"),n(v.PURCHASE_ORDER.LIST)}finally{h(!1)}})()},[d,n]);const c=s=>s?new Date(s).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",l=s=>{const a=typeof s=="string"?parseFloat(s):s;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(a||0)},g=s=>{switch(s?.toLowerCase()){case"pending_admin_approval":case"pending approval":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"sent to vendor":case"sent_to_vendor":return"bg-blue-100 text-blue-800";case"partially received":case"partially_received":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(f,{})}):t?e.jsxs("div",{className:"w-full h-full overflow-auto space-y-6 p-4 pb-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_,{}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Purchase Order Details"}),e.jsx("p",{className:"text-sm text-gray-500",children:"View purchase order information and ordered items"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Purchase Order Information"}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${g(t.status)}`,children:t.status?.replace(/_/g," ")})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"PO Number"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-gray-900",children:t.po_number||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"PO Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:c(t.po_date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Expected Delivery Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:c(t.expected_delivery_date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Total Amount"}),e.jsx("p",{className:"mt-1 text-lg font-bold text-green-600",children:l(t.total_amount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Total Items"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.items?.length||0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:c(t.created_at)})]})]})})]}),t.vendor&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Vendor Information"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Vendor Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.vendor.party_name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Company Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.vendor.company_name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"GST Number"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.vendor.gstin||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.vendor.phone||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.vendor.email||"-"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Address"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.vendor.address||"-"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Delivery Information"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Delivery Address"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.delivery_address||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Contact Person"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.delivery_contact_person||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Contact Phone"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.delivery_contact_phone||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Branch"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.branch?.branch_name||"-"})]})]}),t.special_instructions&&e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Special Instructions"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:t.special_instructions})]})]})]}),t.comparative_statement&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Related Comparative Statement"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Statement Number"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.comparative_statement.statement_number||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"MR Number"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.comparative_statement.material_requisition?.mr_number||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Department"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.comparative_statement.material_requisition?.department||"-"})]})]})})]}),(t.status?.toLowerCase().includes("cancel")||t.status==="Cancelled")&&t.cancellation_reason&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-red-200",children:e.jsx("h2",{className:"text-lg font-semibold text-red-900",children:"Cancellation Information"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-red-700",children:"Cancellation Reason"}),e.jsx("p",{className:"mt-1 text-sm text-red-800 bg-red-100 p-3 rounded-md",children:t.cancellation_reason})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Ordered Items"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(w,{children:[e.jsx(k,{cols:[{title:"S.No."},{title:"Item Name"},{title:"Item Code"},{title:"Item Description"},{title:"Unit"},{title:"Quantity"},{title:"Unit Price"},{title:"Discount %"},{title:"Tax %"},{title:"Total Price"}]}),e.jsx("tbody",{children:t.items&&t.items.length>0?t.items.map((s,a)=>e.jsxs(m,{children:[e.jsx(r,{className:"text-center font-medium",children:a+1}),e.jsx(r,{children:s.item?.item_name||"-"}),e.jsx(r,{className:"font-mono text-sm",children:s.item?.item_code||"-"}),e.jsx(r,{className:"text-sm",children:s.item?.description||"-"}),e.jsx(r,{className:"text-center",children:s.item?.unit?.unit_symbol||"-"}),e.jsx(r,{className:"text-center",children:s.quantity_ordered||"0"}),e.jsx(r,{className:"text-right",children:l(s.unit_price||0)}),e.jsxs(r,{className:"text-center",children:[s.discount_percentage||"0","%"]}),e.jsxs(r,{className:"text-center",children:[s.tax_percentage||"0","%"]}),e.jsx(r,{className:"text-right font-medium",children:l(s.total_price||0)})]},s.id)):e.jsx(m,{children:e.jsx("td",{colSpan:10,className:"text-center py-8 text-gray-500",children:"No items found"})})})]})})})]}),t.items&&t.items.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Order Summary"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.items.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Items"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.items.reduce((s,a)=>s+(parseFloat(a.quantity_ordered)||0),0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Quantity"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l(t.items.reduce((s,a)=>s+(parseFloat(a.unit_price)||0)*(parseFloat(a.quantity_ordered)||0),0))}),e.jsx("div",{className:"text-sm text-gray-500",children:"Subtotal"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l(t.total_amount)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Grand Total"})]})]})})]})]}):e.jsx("div",{className:"flex justify-center py-20",children:e.jsx("div",{className:"text-gray-500",children:"Purchase Order not found"})})};export{S as default};
