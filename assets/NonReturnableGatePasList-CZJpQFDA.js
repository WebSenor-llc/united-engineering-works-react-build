import{u as N,r as o,a as P,j as e,A,h as u,e as f,y as l}from"./index-DQLLPGln.js";import{L as E}from"./ListWrapper-BG9lLSAN.js";import{T as L,a as G,b as s}from"./TableWrapper-dhiQGSew.js";import{T as R}from"./TableRow-BJ6MC2zs.js";import{u as v}from"./usePagination-BbkvL3z1.js";import{T as D}from"./TableActions-BtqL2JIQ.js";import{T as w}from"./TableDelete-DNYHMsVC.js";import{L as F}from"./Loading-B1xtHlfm.js";const I=()=>{const{page:i,rowsPerPage:c,setTotal:x,renderPagination:j}=v(),g=N(),[d,p]=o.useState([]),[b,h]=o.useState(!1),{selectedBranchId:m}=P(),y=t=>{if(!t)return"";const[a]=t.split("T"),[r,n,_]=a.split("-");return`${_}-${n}-${r}`};o.useEffect(()=>{(async()=>{h(!0);try{const a=await u.get(f.non_returnable_gate_pass.items,{params:{page:i+1,rowsPerPage:c,branch_id:m}}),r=a.data?.gate_passes||a.data?.data||a.data||[],n=a.data?.pagination;p(r),n?.total!==void 0&&x(n.total)}catch(a){console.error("Failed to fetch non-returnable gate passes",a),l.error("Failed to load gate passes")}finally{h(!1)}})()},[i,c,m]);const T=async t=>{try{await u.delete(f.non_returnable_gate_pass.delete(t)),p(a=>a.filter(r=>r.id!==t)),l.success("Gate pass deleted successfully")}catch(a){console.error("Failed to delete gate pass",a),l.error("Failed to delete gate pass")}};return e.jsxs(E,{title:"Non Returnable Gate Pass List",createOnClick:()=>g(A.NON_RETURNABLE_GATEPAS.CREATE),children:[b?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(F,{})}):e.jsxs(L,{children:[e.jsx(G,{cols:[{title:"Date"},{title:"Party Name"},{title:"Purpose"},{title:"Vehicle Number"},{title:"Actions"}]}),e.jsx("tbody",{children:d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"No gate passes found"})}):d.map((t,a)=>e.jsxs(R,{children:[e.jsx(s,{className:"px-5",children:a+1}),e.jsx(s,{children:y(t.created_at||t.date)}),e.jsx(s,{children:t.party_name||"-"}),e.jsx(s,{children:t.purpose||"-"}),e.jsx(s,{children:t.vehicle_number||"-"}),e.jsx(s,{children:e.jsx(D,{children:e.jsx(w,{onClick:()=>T(t.id)})})})]},t.id))})]}),j()]})};export{I as default};
