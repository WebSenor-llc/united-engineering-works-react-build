import{l as x,r as n,j as e,D as m,h,e as j}from"./index-CyRDNjis.js";import{B as p}from"./BackButton-Brb_nHm3.js";import{L as u}from"./Loading-BBJJw7ob.js";import{N as g}from"./NoDataFound-CTPgZbSv.js";import{T as N,a as f,b as r}from"./TableWrapper-CafYCdV6.js";import{T as b}from"./TableRow-D_ujNsvm.js";const S=()=>{const{id:i}=x(),[c,l]=n.useState(!1),[s,d]=n.useState(null),o=async()=>{l(!0);try{const t=await h.get(j.material_requisition.details(Number(i))),a=t.data.data?.material_requisition||t.data.material_requisition||t.data;d(a)}catch(t){console.error(t)}finally{l(!1)}};return n.useEffect(()=>{i&&o()},[i]),c?e.jsx(u,{}):s?e.jsxs("div",{className:"max-w-6xl mx-auto min-h-screen p-4 bg-gray-50 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{}),e.jsx("h2",{className:"text-xl font-semibold",children:"Material Request Details"})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl space-y-4",children:[e.jsx("div",{className:"flex items-center gap-2 text-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Basic Details"})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"MR Number:"})," ",s.mr_number||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Department:"})," ",s.department||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"}),e.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full ml-2",children:s.status||"--"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Priority:"})," ",s.priority||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Required Date:"})," ",m.dateWithTime(s.required_by_date)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Inspection:"})," ",s.inspection?"Yes":"No"]}),e.jsxs("p",{className:"col-span-full",children:[e.jsx("strong",{children:"Purpose / Remarks:"})," ",s.remarks||"--"]})]}),(s.status?.includes("Cancelled")||s.status?.includes("Rejected"))&&e.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-800",children:[e.jsxs("strong",{children:[s.status?.includes("Cancelled")?"Cancellation":"Rejection"," ","Reason:"]})," ",s.cancellation_reason||s.rejection_reason||"No reason provided"]})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Usage Details"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Project Use:"})," ",s.project_use||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Project Note:"})," ",s.project_note||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Machine Use:"})," ",s.machine_use||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Machine Note:"})," ",s.machine_note||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Site Use:"})," ",s.site_use||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Site Note:"})," ",s.site_note||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"General Use:"})," ",s.general_use||"--"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"General Note:"})," ",s.general_note||"--"]})]})]}),e.jsxs("div",{className:"bg-white border p-6 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Items Requested"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(N,{children:[e.jsx(f,{cols:[{title:"Item Name"},{title:"Item Code"},{title:"Unit"},{title:"Requested Qty"},{title:"Stock In Store"},{title:"Remarks"}]}),e.jsx("tbody",{children:s.items?.length>0?s.items.map((t,a)=>e.jsxs(b,{children:[e.jsx(r,{className:"text-center",children:a+1}),e.jsx(r,{children:t.item?.item_name||"--"}),e.jsx(r,{children:t.item?.item_code||"--"}),e.jsx(r,{children:t.item?.unit?.unit_name||"--"}),e.jsx(r,{className:"text-center",children:t.quantity_required||0}),e.jsx(r,{className:"text-center",children:t.item?.current_stock??"--"}),e.jsx(r,{children:t.remarks||"--"})]},t.item_id||a)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-4",children:"No Items Found"})})})]})})]})]}):e.jsx(g,{})};export{S as default};
