import{u as f,a as j,r,j as e,A as p,h as u,e as m,y as l}from"./index-Dpd7qybE.js";import{L as T}from"./ListWrapper-BE1d8M7S.js";import{T as E,a as y,b as a}from"./TableWrapper-DtKbbg8N.js";import{T as A}from"./TableRow-DkGT6S5k.js";import{u as P}from"./usePagination-CTvTl5R7.js";import{T as _,a as R}from"./TableDelete-DH9r8gXr.js";import{T as L}from"./TableEdit-CDNZJjSB.js";import{L as N}from"./Loading-rkjgGfkz.js";const F=()=>{const{renderPagination:h}=P(),n=f(),{selectedBranchId:o}=j(),[i,g]=r.useState([]),[x,c]=r.useState(!1),d=async()=>{c(!0);try{const t=await u.get(m.returnable_gate_pass.items,{params:{branch_id:o}});g(t.data.gate_passes||[])}catch(t){console.error("Error fetching gate passes:",t),l.error("Failed to load returnable gate passes")}finally{c(!1)}};r.useEffect(()=>{d()},[o]);const b=async t=>{try{await u.delete(m.returnable_gate_pass.delete(t)),l.success("Returnable gate pass deleted successfully"),d()}catch(s){console.error("Failed to delete gate pass",s),l.error(s?.response?.data?.message||"Failed to delete returnable gate pass")}};return e.jsxs(T,{title:"Returnable GatePass List",createOnClick:()=>n(p.RETURNABLE_GATEPAS.CREATE),children:[x?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(N,{})}):e.jsxs(E,{children:[e.jsx(y,{cols:[{title:"Date"},{title:"Party Name"},{title:"Purpose"},{title:"Vehicle Number"},{title:"Action"}]}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"No returnable gate passes found"})}):i.map((t,s)=>e.jsxs(A,{children:[e.jsx(a,{children:s+1}),e.jsx(a,{children:new Date(t.gate_pass_date||t.created_at||"").toLocaleDateString()}),e.jsx(a,{children:t.party_name}),e.jsx(a,{children:t.purpose}),e.jsx(a,{children:t.vehicle_number}),e.jsxs(_,{children:[e.jsx(L,{onClick:()=>n(`${p.RETURNABLE_GATEPAS.CREATE}?editId=${t.id}`)}),e.jsx(R,{onClick:()=>b(t.id)})]})]},t.id))})]}),h()]})};export{F as default};
