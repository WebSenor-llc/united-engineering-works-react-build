const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-pdf.browser-CxP9ZOZx.js","assets/index-7oOzxGwh.js","assets/index-Qy54td3Z.css","assets/IssueSlipRepairReqPDF-NCVr9gI7.js"])))=>i.map(i=>d[i]);
import{g as v,u as D,r as d,j as e,B as I,h as u,e as h,y as g,_ as j}from"./index-7oOzxGwh.js";import{L as q}from"./Loading-EmYUABAG.js";import{B as R}from"./BackButton-D-IQrB5O.js";const P=()=>{const{id:n}=v(),m=D(),[s,y]=d.useState(null),[f,b]=d.useState(!0),[x,p]=d.useState(!1);d.useEffect(()=>{(async()=>{if(n)try{const a=await u.get(h.repair_issue_slip.details(Number(n))),r=a.data?.data||a.data;if(r.inhouse_deposit_slip_id)try{const i=await u.get(h.repair_requisition.details(r.inhouse_deposit_slip_id)),c=i.data?.data||i.data;r.repair_requisition=c}catch(i){console.error("Error fetching repair requisition details:",i)}y(r)}catch(a){console.error("Failed to fetch Issue Slip details:",a),g.error("Failed to load Issue Slip details"),m(-1)}finally{b(!1)}})()},[n,m]);const N=t=>t?new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",_=async()=>{if(s)try{p(!0);const{pdf:t}=await j(async()=>{const{pdf:o}=await import("./react-pdf.browser-CxP9ZOZx.js");return{pdf:o}},__vite__mapDeps([0,1,2])),{default:a}=await j(async()=>{const{default:o}=await import("./IssueSlipRepairReqPDF-NCVr9gI7.js");return{default:o}},__vite__mapDeps([3,1,2,0])),i=await t(e.jsx(a,{issueSlip:s})).toBlob(),c=URL.createObjectURL(i),l=document.createElement("a");l.href=c,l.download=`Issue-Slip-${s.id}.pdf`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(c)}catch(t){console.error("Error generating PDF:",t),g.error("Failed to generate PDF")}finally{p(!1)}};return f?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(q,{})}):s?e.jsxs("div",{className:"w-full h-full overflow-auto space-y-6 p-4 pb-20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(R,{}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Issue Slip Details"}),e.jsx("p",{className:"text-sm text-gray-500",children:"View issue slip information and repair requisition details"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(I,{className:"bg-blue-600 text-white",disabled:x,onClick:_,children:x?"Generating PDF...":"Download PDF"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Issue Slip Information"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Issue Slip ID"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["IS-",s.id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Issued To"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[s.to_whom_user?.full_name||s.other||"-",s.to_whom_user?.employee_code&&e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",s.to_whom_user.employee_code,")"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created By"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[s.creator?.full_name||"-",s.creator?.employee_code&&e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",s.creator.employee_code,")"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Issue Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:N(s.created_at)})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Issue Description"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.description||"-"})]})]})})]}),s.repair_requisition&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Related Repair Requisition"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Requisition ID"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["RR-",s.repair_requisition.id]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Repair Item"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.repair_requisition.repair_item||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Department"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.repair_requisition.department||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Product"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.repair_requisition.product?.name||s.repair_requisition.product?.product_name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Machine"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.repair_requisition.machine?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Item"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[s.repair_requisition.item?.item_name||"-",s.repair_requisition.item?.item_code&&e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",s.repair_requisition.item.item_code,")"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 capitalize",children:s.repair_requisition.status})})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Requisition Description"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.repair_requisition.description||"-"})]})]})})]})]}):e.jsx("div",{className:"flex justify-center py-20",children:e.jsx("div",{className:"text-gray-500",children:"Issue Slip not found"})})};export{P as default};
