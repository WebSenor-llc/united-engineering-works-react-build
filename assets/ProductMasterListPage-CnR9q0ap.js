import{r as o,u as b,j as e,H as A,P as p,A as u,e as h,h as E}from"./index-DZUejYSu.js";import{L as N}from"./ListWrapper-B8opYR8T.js";import{T as R}from"./TableActions-Df8LXwIU.js";import{T as a}from"./TableData-CgIR3Yxt.js";import{T as v}from"./TableDelete-DqVMD4Nf.js";import{T as C}from"./TableEdit-Cg5PE5iE.js";import{T as L,a as w}from"./TableWrapper-eUq9a7Bu.js";import{T as D}from"./TableRow-BwaacXN6.js";import{u as H}from"./usePagination-TzSKWAro.js";import{L as M}from"./Loading-BZ-_58ep.js";const F=()=>{const{page:i,rowsPerPage:c,setTotal:x,renderPagination:T}=H(),[l,f]=o.useState([]),[j,n]=o.useState(!1),[r,g]=o.useState(""),d=b(),m=async s=>{n(!0);try{const t={page:i+1,per_page:c};s&&(t.product_name=s);const _=await E.get(h.product_master.products,{params:t}),{products:y,pagination:S}=_.data;f(y),x(S.last_page)}catch(t){console.log(t)}finally{n(!1)}};o.useEffect(()=>{m(r)},[i,c,r]);const P=s=>{g(s)};return e.jsxs(N,{title:"Product Master",createOnClick:p.hasPermission("master_data_create_products")?()=>d(u.PRODUCT_MASTER.CREATE):void 0,children:[e.jsx("div",{className:"mb-4",children:e.jsx(A,{placeholder:"Search by product name...",onSearch:P,className:"w-full sm:w-96"})}),j?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(M,{})}):e.jsxs(L,{children:[e.jsx(w,{cols:[{title:"Product Name"},{title:"Source"},{title:"Quantity Required"},{title:"Alloted To"},{title:"Actions"}]}),e.jsx("tbody",{children:l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:r?"No products found matching your search":"No products available"})}):l.map((s,t)=>e.jsxs(D,{children:[e.jsx(a,{className:"px-5",children:i*c+t+1}),e.jsx(a,{children:s.name}),e.jsx(a,{children:s.source}),e.jsx(a,{children:s.quantity_required}),e.jsx(a,{children:s?.allocated_supervisor?.full_name||"-"}),p.hasPermission("master_data_update_products")&&e.jsx(a,{children:e.jsxs(R,{children:[e.jsx(C,{onClick:()=>d(`${u.PRODUCT_MASTER.CREATE}?editId=${s.id}`)}),e.jsx(v,{refetch:()=>m(r),endpoint:h.product_master.delete(s?.id)})]})})]},t))})]}),T()]})};export{F as default};
