import{u as b,r as f,a as R,j as a,A as p,h as T,e as h,y as x}from"./index-K9d2s2ak.js";import{L as P}from"./ListWrapper-BJunTYp4.js";import{T as r}from"./TableData-CRcUF9xG.js";import{T as N,a as D}from"./TableWrapper-KnGC4Kvc.js";import{T as F}from"./TableRow-D6SvfGXk.js";import{u as M}from"./usePagination-BaFH0qQ1.js";import{T as C}from"./TableActions-BWIL9Be6.js";import{T as I}from"./TableEdit-DnWmPK0U.js";import{T as L}from"./TableDelete-MrNCSMHN.js";const O=()=>{const{page:i,rowsPerPage:o,setTotal:u,renderPagination:A}=M(),l=b(),[j,y]=f.useState([]),{user:c,selectedBranchId:d}=R(),g=e=>{if(!e)return{ymd:"",dmy:""};const[t]=e.split("T"),[n,s,E]=t.split("-");return{ymd:t,dmy:`${E}-${s}-${n}`}},m=async()=>{try{const e=d||c?.branch_id,t=await T.get(h.material_transfer.items,{params:{page:i+1,per_page:o,...e&&{branch_id:e}}}),n=t.data?.data?.transfers||t.data?.transfers||[],s=t.data?.pagination;y(n),s?.last_page!==void 0&&u(s.last_page)}catch(e){console.error("Failed to fetch material transfers",e)}};f.useEffect(()=>{m()},[i,o,d,c]);const _=async e=>{try{await T.delete(h.material_transfer.delete(e)),x.success("Material transfer deleted successfully"),m()}catch(t){console.error("Failed to delete material transfer",t),x.error("Failed to delete material transfer")}};return a.jsxs(P,{title:"Material Transfer",createOnClick:()=>l(p.MATERIAL_TRANSFER.CREATE),children:[a.jsxs(N,{children:[a.jsx(D,{cols:[{title:"Date"},{title:"Transfer From"},{title:"Transfer To"},{title:"Material Request"},{title:"Actions"}]}),a.jsx("tbody",{children:j.map((e,t)=>a.jsxs(F,{children:[a.jsx(r,{className:"px-5",children:i*o+t+1}),a.jsx(r,{children:g(e.created_at).dmy}),a.jsx(r,{children:e.transfer_from||"N/A"}),a.jsx(r,{children:e.transfer_to||"N/A"}),a.jsx(r,{children:e?.mr||"N/A"}),a.jsx(r,{children:a.jsxs(C,{children:[a.jsx(I,{onClick:()=>l(`${p.MATERIAL_TRANSFER.CREATE}?editId=${e.id}`)}),a.jsx(L,{onClick:()=>_(e.id)})]})})]},e.id))})]}),A()]})};export{O as default};
