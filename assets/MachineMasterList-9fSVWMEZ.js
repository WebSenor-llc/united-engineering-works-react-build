import{u as N,r as i,j as e,H as S,A as p,e as u,P as y,h as A}from"./index-DeavznKd.js";import{L as E}from"./ListWrapper-CnyXgBOK.js";import{T as _}from"./TableActions-8N_lG_oo.js";import{T as P,a as v,b as s}from"./TableWrapper-qyu8zfi_.js";import{T as w}from"./TableDelete-CoadW7YK.js";import{T as C}from"./TableEdit-D4dLqMlW.js";import{T as H}from"./TableRow-upOc44NI.js";import{u as L}from"./usePagination-7Fzd4vLe.js";import{L as R}from"./Loading-Chxo8Vyf.js";import{g as D,f as $}from"./maintenanceUtils-DBVPLXJ6.js";const J=()=>{const l=N(),{page:c,rowsPerPage:o,setTotal:f,renderPagination:j}=L(),[m,g]=i.useState([]),[T,d]=i.useState(!1),[r,b]=i.useState(""),h=async a=>{d(!0);try{const t={page:c+1,rowsPerPage:o};a&&(t.machine_name=a);const n=await A.get(u.machine_master.machines,{params:t}),x=n?.data;g(x),f(n.data?.total||x.length)}catch(t){console.log(t)}finally{d(!1)}};i.useEffect(()=>{h(r)},[c,o,r]);const M=a=>{b(a)};return e.jsxs(E,{title:"Machine Master",createOnClick:y.hasPermission("master_data_create_machine")?()=>l(p.MACHINE_MASTER.CREATE):void 0,children:[e.jsx("div",{className:"mb-4",children:e.jsx(S,{placeholder:"Search by machine name...",onSearch:M,className:"w-full sm:w-96"})}),T?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(R,{})}):e.jsxs(P,{children:[e.jsx(v,{cols:[{title:"Machine Name"},{title:"Machine Number"},{title:"Status"},{title:"Next Maintenance"},{title:"Maintenance Status"},{title:"Actions"}]}),e.jsx("tbody",{children:m.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8 text-gray-500",children:r?"No machines found matching your search":"No machines available"})}):m.map((a,t)=>{const n=D(a.maintenance_date);return e.jsxs(H,{children:[" ",e.jsx(s,{className:"px-5",children:c*o+t+1}),e.jsx(s,{children:a.name}),e.jsx(s,{children:a.number}),e.jsx(s,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.status==="operational"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.status==="operational"?"Operational":"Breakdown"})}),e.jsx(s,{children:$(a.maintenance_date)}),e.jsx(s,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.badge}`,children:n.text})}),e.jsx(s,{children:e.jsxs(_,{children:[e.jsx(C,{onClick:()=>l(`${p.MACHINE_MASTER.CREATE}?id=${a?.id}`)}),e.jsx(w,{refetch:()=>h(r),endpoint:u.machine_master.delete(a?.id)})]})})]},t)})})]}),j()]})};export{J as default};
